{"version":3,"file":"js/685.153e90d8.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/CatalogDynamicGroupLayerView2D-C3GrQqN8.js"],"sourcesContent":["import{bt as a,bu as s,bv as f,a8 as V,f8 as C,gK as F,bh as U,gL as _,G as x,gM as w}from\"./main-DCIX61zy.js\";import{j as H,y as I}from\"./LayerView-DONYuvqR.js\";const h=Symbol(),O=o=>{let e=class extends o{constructor(){super(...arguments),this.layerViews=new V,this._debouncedUpdate=C(async()=>{const{layer:r,parent:i}=this,n=i?.footprintLayerView;let d=[];const l=this._createQuery();if(l&&n){const{features:y}=await n.queryFeatures(l);this.suspended||(d=y.map(c=>r.acquireLayer(c)))}this.removeHandles(h),this.addHandles(d,h)})}get creatingLayerViews(){return this.view?.layerViewManager.isCreatingLayerViewsForLayer(this.layer)??!1}isUpdating(){return this.creatingLayerViews||this.layer.updating||this.layerViews.some(r=>r.updating)}enableLayerUpdates(){return F([this._updatingHandles.addWhen(()=>this.parent?.footprintLayerView?.dataUpdating===!1,()=>this.updateLayers()),this._updatingHandles.add(()=>[this.layer.maximumVisibleSublayers,this.layer.parent?.orderBy,this.parent?.footprintLayerView?.filter,this.parent?.footprintLayerView?.timeExtent,this.suspended],()=>this.updateLayers()),U(()=>this.removeHandles(h))])}updateLayers(){this.suspended?this.removeHandles(h):this._updatingHandles.addPromise(_(this._debouncedUpdate()).catch(r=>{x.getLogger(this).error(r)}))}_createQuery(){const r=this.parent?.footprintLayerView,i=this.layer?.parent;if(!r||!i||i.destroyed)return null;const{layer:{maximumVisibleSublayers:n},view:{scale:d}}=this;if(!n)return null;const{itemTypeField:l,itemSourceField:y,itemNameField:c,minScaleField:m,maxScaleField:L,objectIdField:v,orderBy:b}=i,S=w(`${m} IS NULL OR ${d} <= ${m} OR ${m} = 0`,`${L} IS NULL OR ${d} >= ${L}`),p=b?.find(u=>u.field&&!u.valueExpression),t=r.createQuery();if(t.returnGeometry=!1,t.num=n,t.outFields=[v,y,c],t.where=w(t.where,S),this.unsupportedItemTypes!=null){const u=`${l} NOT IN (${this.unsupportedItemTypes.map($=>`'${$}'`)})`;t.where=w(t.where,u)}return p?.field&&(t.orderByFields=[`${p.field} ${p.order===\"descending\"?\"DESC\":\"ASC\"}`],t.outFields.push(p.field)),t}};return a([s({readOnly:!0})],e.prototype,\"creatingLayerViews\",null),a([s()],e.prototype,\"layer\",void 0),a([s()],e.prototype,\"layerViews\",void 0),a([s({readOnly:!0})],e.prototype,\"unsupportedItemTypes\",void 0),a([s()],e.prototype,\"parent\",void 0),a([s({readOnly:!0})],e.prototype,\"isUpdating\",null),e=a([f(\"esri.views.layers.CatalogDynamicGroupLayerView\")],e),e};let g=class extends O(H(I)){constructor(){super(...arguments),this.unsupportedItemTypes=[\"Scene Service\"],this.layerViews=new V}attach(){this.addAttachHandles([this.layerViews.on(\"after-changes\",()=>this._updateStageChildren()),this.enableLayerUpdates()])}detach(){this.container.removeAllChildren()}update(o){this.updateLayers()}viewChange(){}moveEnd(){this.requestUpdate()}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach((o,e)=>this.container.addChildAt(o.container,e))}};g=a([f(\"esri.views.2d.layers.CatalogDynamicGroupLayerView2D\")],g);const E=g;export{E as default};\n"],"names":["h","Symbol","O","o","e","constructor","super","arguments","this","layerViews","_debouncedUpdate","async","layer","r","parent","i","n","footprintLayerView","d","l","_createQuery","features","y","queryFeatures","suspended","map","c","acquireLayer","removeHandles","addHandles","creatingLayerViews","view","layerViewManager","isCreatingLayerViewsForLayer","isUpdating","updating","some","enableLayerUpdates","_updatingHandles","addWhen","dataUpdating","updateLayers","add","maximumVisibleSublayers","orderBy","filter","timeExtent","addPromise","catch","getLogger","error","destroyed","scale","itemTypeField","itemSourceField","itemNameField","minScaleField","m","maxScaleField","L","objectIdField","v","b","S","p","find","u","field","valueExpression","t","createQuery","returnGeometry","num","outFields","where","unsupportedItemTypes","$","orderByFields","order","push","readOnly","prototype","g","attach","addAttachHandles","on","_updateStageChildren","detach","container","removeAllChildren","update","viewChange","moveEnd","requestUpdate","forEach","addChildAt","E"],"sourceRoot":""}