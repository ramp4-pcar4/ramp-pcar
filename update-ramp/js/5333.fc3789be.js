"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[5333],{25865:function(t,n,e){e.d(n,{H:function(){return d},L:function(){return h},N:function(){return f},Y:function(){return tt}});var r,o,i=e(44444),s=e(38837),c=e(81203),u=e(52454);function a(t){return t?{ray:(0,s.b)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,s.b)(),c0:0,c1:Number.MAX_VALUE}}function d(t){return t?[(0,c.M)(t[0]),(0,c.M)(t[1]),(0,c.M)(t[2]),(0,c.M)(t[3]),(0,c.M)(t[4]),(0,c.M)(t[5])]:[(0,c.M)(),(0,c.M)(),(0,c.M)(),(0,c.M)(),(0,c.M)(),(0,c.M)()]}function l(){return[(0,i.ap)(),(0,i.ap)(),(0,i.ap)(),(0,i.ap)(),(0,i.ap)(),(0,i.ap)(),(0,i.ap)(),(0,i.ap)()]}function f(t,n){for(let e=0;e<O;e++)(0,c.h)(t[e],n[e]);return t}function h(t,n,e,r=p){const o=(0,i.gm)(c.a.get(),n,t);(0,i.dV)(o,o);for(let s=0;s<m;++s){const t=(0,i.iy)(c.r.get(),E[s],o);(0,i.dQ)(r[s],t[0]/t[3],t[1]/t[3],t[2]/t[3])}T(e,r)}function T(t,n){(0,c.p)(n[o.FAR_BOTTOM_LEFT],n[o.NEAR_BOTTOM_LEFT],n[o.NEAR_TOP_LEFT],t[r.LEFT]),(0,c.p)(n[o.NEAR_BOTTOM_RIGHT],n[o.FAR_BOTTOM_RIGHT],n[o.FAR_TOP_RIGHT],t[r.RIGHT]),(0,c.p)(n[o.FAR_BOTTOM_LEFT],n[o.FAR_BOTTOM_RIGHT],n[o.NEAR_BOTTOM_RIGHT],t[r.BOTTOM]),(0,c.p)(n[o.NEAR_TOP_LEFT],n[o.NEAR_TOP_RIGHT],n[o.FAR_TOP_RIGHT],t[r.TOP]),(0,c.p)(n[o.NEAR_BOTTOM_LEFT],n[o.NEAR_BOTTOM_RIGHT],n[o.NEAR_TOP_RIGHT],t[r.NEAR]),(0,c.p)(n[o.FAR_BOTTOM_RIGHT],n[o.FAR_BOTTOM_LEFT],n[o.FAR_TOP_LEFT],t[r.FAR])}function _(t,n){for(let e=0;e<O;e++){const r=t[e];if(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]>=n[3])return!1}return!0}new s.s((()=>a())),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.TOP=3]="TOP",t[t.NEAR=4]="NEAR",t[t.FAR=5]="FAR"}(r||(r={})),function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(o||(o={})),o.FAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_LEFT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_BOTTOM_RIGHT,o.NEAR_TOP_RIGHT,o.NEAR_TOP_LEFT,o.FAR_BOTTOM_RIGHT,o.FAR_BOTTOM_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_RIGHT,o.NEAR_BOTTOM_RIGHT,o.FAR_BOTTOM_RIGHT,o.FAR_TOP_RIGHT,o.NEAR_TOP_RIGHT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_TOP_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_LEFT,o.NEAR_TOP_LEFT,o.NEAR_TOP_RIGHT,o.FAR_TOP_RIGHT;const O=6,m=8,E=[(0,i.iV)(-1,-1,-1,1),(0,i.iV)(1,-1,-1,1),(0,i.iV)(1,1,-1,1),(0,i.iV)(-1,1,-1,1),(0,i.iV)(-1,-1,1,1),(0,i.iV)(1,-1,1,1),(0,i.iV)(1,1,1,1),(0,i.iV)(-1,1,1,1)];new s.s(a);const p=l();class g{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,n){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new N,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}destroy(){this._degenerateObjects.clear(),N.clearPool(),j[0]=null,X.prune(),Z.prune()}add(t,n=t.length){this._objectCount+=n,this._grow(t,n);const e=N.acquire();for(let r=0;r<n;r++){const n=t[r];this._isDegenerate(n)?this._degenerateObjects.add(n):(e.init(this._root),this._add(n,e))}N.release(e)}remove(t,n=null){this._objectCount-=t.length;const e=N.acquire();for(const r of t){const t=n??(0,s.a)(this.objectToBoundingSphere(r),Y);x(t[3])?(e.init(this._root),S(r,t,e)):this._degenerateObjects.delete(r)}N.release(e),this._shrink()}update(t,n){if(!x(n[3])&&this._isDegenerate(t))return;const e=H(t);this.remove(e,n),this.add(e)}forEachAlongRay(t,n,e){const r=(0,s.k)(t,n);I(this._root,(t=>{if(!M(r,t))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,n,e,r){const o=(0,s.k)(t,n);I(this._root,(t=>{if(!b(o,t,r))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&e(t)})),!0}))}forEach(t){I(this._root,(n=>{const e=n.node;return e.terminals.forAll(t),null!==e.residents&&e.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,n,e,r=()=>!0,o=1/0){let c=1/0,u=1/0,a=null;const d=D(t,n),l=i=>{if(--o,!r(i))return;const d=this.objectToBoundingSphere(i);if(!_(e,d))return;const l=w(t,n,(0,s.U)(d)),f=l-d[3],h=l+d[3];f<c&&(c=f,u=h,a=i)};return A(this._root,(r=>{if(o<=0||!_(e,r.bounds)||((0,i.dC)(G,d,r.halfSize),(0,i.dE)(G,G,(0,s.U)(r.bounds)),w(t,n,G)>u))return!1;const c=r.node;return c.terminals.forAll((t=>l(t))),null!==c.residents&&c.residents.forAll((t=>l(t))),!0}),t,n),a}forEachInDepthRange(t,n,e,r,o,c,u){let a=-1/0,d=1/0;const l={setRange:t=>{e===g.DepthOrder.FRONT_TO_BACK?(a=Math.max(a,t.near),d=Math.min(d,t.far)):(a=Math.max(a,-t.far),d=Math.min(d,-t.near))}};l.setRange(r);const f=w(n,e,t),h=D(n,e),T=D(n,-e),O=t=>{if(!u(t))return;const r=this.objectToBoundingSphere(t),i=(0,s.U)(r),h=w(n,e,i)-f,T=h-r[3],O=h+r[3];T>d||O<a||!_(c,r)||o(t,l)};A(this._root,(t=>{if(!_(c,t.bounds)||((0,i.dC)(G,h,t.halfSize),(0,i.dE)(G,G,(0,s.U)(t.bounds)),w(n,e,G)-f>d)||((0,i.dC)(G,T,t.halfSize),(0,i.dE)(G,G,(0,s.U)(t.bounds)),w(n,e,G)-f<a))return!1;const r=t.node;return r.terminals.forAll((t=>O(t))),null!==r.residents&&r.residents.forAll((t=>O(t))),!0}),n,e)}forEachNode(t){I(this._root,(n=>t(n.node,n.bounds,n.halfSize,n.depth)))}forEachNeighbor(t,n){const e=(0,s.N)(n),r=(0,s.U)(n),o=n=>{const o=this.objectToBoundingSphere(n),c=(0,s.N)(o),u=e+c;return!((0,i.iY)((0,s.U)(o),r)-u*u<=0)||t(n)};let c=!0;const u=t=>{c&&(c=o(t))};I(this._root,(t=>{const n=(0,s.N)(t.bounds),o=e+n;if((0,i.iY)((0,s.U)(t.bounds),r)-o*o>0)return!1;const a=t.node;return a.terminals.forAll(u),c&&null!==a.residents&&a.residents.forAll(u),c})),c&&this.forEachDegenerateObject(u)}_intersectsObject(t,n){const e=this.objectToBoundingSphere(n);return!(e[3]>0)||(0,s.H)(e,t)}_intersectsObjectWithOffset(t,n,e){const r=this.objectToBoundingSphere(n);return!(r[3]>0)||(0,s.H)(e.applyToBoundingSphere(r),t)}_add(t,n){n.advanceTo(this.objectToBoundingSphere(t))?n.node.terminals.push(t):(n.node.residents.push(t),n.node.residents.length>this._maximumObjectsPerNode&&n.depth<this._maximumDepth&&this._split(n))}_split(t){const n=t.node.residents;t.node.residents=null;for(let e=0;e<n.length;e++){const r=N.acquire().init(t);this._add(n.at(e),r),N.release(r)}}_grow(t,n){if(0!==n&&(B(t,n,(t=>this.objectToBoundingSphere(t)),Q),x(Q[3])&&!this._fitsInsideTree(Q)))if(F(this._root.node))(0,s.a)(Q,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(Q);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(Q,t):this._growRootAsSubNode(t),N.release(t)}}_rebuildTree(t,n){(0,i.dF)((0,s.U)(W),(0,s.U)(n.bounds)),W[3]=n.halfSize,B([t,W],2,(t=>t),K);const e=N.acquire().init(this._root);this._root.initFrom(null,K,K[3]),this._root.increaseHalfSize(1.25),I(e,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),N.release(e)}_placingRootViolatesMaxDepth(t){const n=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let e=0;return I(this._root,(t=>(e=Math.max(e,t.depth),e+n<=this._maximumDepth))),e+n>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const n=t[3],e=t;let r=-1/0;const o=this._root.bounds,i=this._root.halfSize;for(let c=0;c<3;c++){const t=o[c]-i-(e[c]-n),s=e[c]+n-(o[c]+i),u=Math.max(0,Math.ceil(t/(2*i))),a=Math.max(0,Math.ceil(s/(2*i)))+1,d=2**Math.ceil(Math.log(u+a)*Math.LOG2E);r=Math.max(r,d),J[c].min=u,J[c].max=a}for(let c=0;c<3;c++){let t=J[c].min,n=J[c].max;const e=(r-(t+n))/2;t+=Math.ceil(e),n+=Math.floor(e);const s=o[c]-i-t*i*2;z[c]=s+(n+t)*i}const s=r*i;return z[3]=s*V,N.acquire().initFrom(null,z,s,0)}_growRootAsSubNode(t){const n=this._root.node;(0,i.dF)((0,s.U)(Q),(0,s.U)(this._root.bounds)),Q[3]=this._root.halfSize,this._root.init(t),t.advanceTo(Q,null,!0),t.node.children=n.children,t.node.residents=n.residents,t.node.terminals=n.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const n=this._root.node.children;let e=0,r=0;for(;r<n.length&&null==t;)e=r++,t=n[e];for(;r<n.length;)if(n[r++])return-1;return e}_isDegenerate(t){return!x(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const n=this._root.bounds,e=this._root.halfSize;return t[3]<=e&&t[0]>=n[0]-e&&t[0]<=n[0]+e&&t[1]>=n[1]-e&&t[1]<=n[1]+e&&t[2]>=n[2]-e&&t[2]<=n[2]+e}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:n,_objectCount:e}=this,r=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:n,objectCount:e,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}_nodeToJSON(t){const n=t.children.map((t=>t?this._nodeToJSON(t):null)),e=t.residents?.map((t=>this.objectToBoundingSphere(t))),r=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:n,residents:e,terminals:r}}static fromJSON(t){const n=new g((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return n._objectCount=t.objectCount,n._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),n}}class N{constructor(){this.bounds=(0,s.E)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,n,e,r=this.depth){return this.node=t??N.createEmptyNode(),n&&(0,s.a)(n,this.bounds),this.halfSize=e,this.depth=r,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*V}advance(t){let n=this.node.children[t];n||(n=N.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;const e=y[t];return this.bounds[0]+=e[0]*this.halfSize,this.bounds[1]+=e[1]*this.halfSize,this.bounds[2]+=e[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,n,e=!1){for(;;){if(this.isTerminalFor(t))return n&&n(this,-1),!0;if(this.isLeaf()){if(!e)return n&&n(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);n&&n(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const n=this.bounds;return(n[0]<t[0]?1:0)+(n[1]<t[1]?2:0)+(n[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new i.cM({shrink:!0}),residents:new i.cM({shrink:!0})}}static acquire(){return N._pool.acquire()}static release(t){N._pool.release(t)}static clearPool(){N._pool.prune()}}function I(t,n){let e=N.acquire().init(t);const r=[e];for(;0!==r.length;){if(e=r.pop(),n(e)&&!e.isLeaf())for(let t=0;t<e.node.children.length;t++)e.node.children[t]&&r.push(N.acquire().init(e).advance(t));N.release(e)}}function A(t,n,e,r=g.DepthOrder.FRONT_TO_BACK){let o=N.acquire().init(t);const i=[o];for(v(e,r,$);0!==i.length;){if(o=i.pop(),n(o)&&!o.isLeaf())for(let t=7;t>=0;--t){const n=$[t];o.node.children[n]&&i.push(N.acquire().init(o).advance(n))}N.release(o)}}function S(t,n,e){X.clear();const r=e.advanceTo(n,((t,n)=>{X.push(t.node),X.push(n)}))?e.node.terminals:e.node.residents;if(r.removeUnordered(t),0===r.length)for(let o=X.length-2;o>=0&&R(X.data[o],X.data[o+1]);o-=2);}function R(t,n){return n>=0&&(t.children[n]=null),!!F(t)&&(null===t.residents&&(t.residents=new i.cM({shrink:!0})),!0)}function M(t,n){return L((0,s.U)(n.bounds),2*-n.halfSize,q),L((0,s.U)(n.bounds),2*n.halfSize,k),(0,u.i)(t.origin,t.direction,q,k)}function b(t,n,e){return L((0,s.U)(n.bounds),2*-n.halfSize,q),L((0,s.U)(n.bounds),2*n.halfSize,k),e.applyToMinMax(q,k),(0,u.i)(t.origin,t.direction,q,k)}function F(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let n=0;n<t.children.length;n++)if(t.children[n])return!1;return!0}function P(t,n){t[0]=Math.min(t[0],n[0]-n[3]),t[1]=Math.min(t[1],n[1]-n[3]),t[2]=Math.min(t[2],n[2]-n[3])}function C(t,n){t[0]=Math.max(t[0],n[0]+n[3]),t[1]=Math.max(t[1],n[1]+n[3]),t[2]=Math.max(t[2],n[2]+n[3])}function L(t,n,e){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function B(t,n,e,r){if(1===n){const n=e(t[0]);(0,s.a)(n,r)}else{q[0]=1/0,q[1]=1/0,q[2]=1/0,k[0]=-1/0,k[1]=-1/0,k[2]=-1/0;for(let r=0;r<n;r++){const n=e(t[r]);x(n[3])&&(P(q,n),C(k,n))}(0,i.iX)((0,s.U)(r),q,k,.5),r[3]=Math.max(k[0]-q[0],k[1]-q[1],k[2]-q[2])/2}}function v(t,n,e){if(!Z.length)for(let r=0;r<8;++r)Z.push({index:0,distance:0});for(let r=0;r<8;++r){const e=y[r];Z.data[r].index=r,Z.data[r].distance=w(t,n,e)}Z.sort(((t,n)=>t.distance-n.distance));for(let r=0;r<8;++r)e[r]=Z.data[r].index}function D(t,n){let e,r=1/0;for(let o=0;o<8;++o){const i=w(t,n,U[o]);i<r&&(r=i,e=U[o])}return e}function w(t,n,e){return n*(t[0]*e[0]+t[1]*e[1]+t[2]*e[2])}function x(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}N._pool=new i.iW(N),function(t){var n;(n=t.DepthOrder||(t.DepthOrder={}))[n.FRONT_TO_BACK=1]="FRONT_TO_BACK",n[n.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(g||(g={}));const y=[(0,i.aq)(-1,-1,-1),(0,i.aq)(1,-1,-1),(0,i.aq)(-1,1,-1),(0,i.aq)(1,1,-1),(0,i.aq)(-1,-1,1),(0,i.aq)(1,-1,1),(0,i.aq)(-1,1,1),(0,i.aq)(1,1,1)],U=[(0,i.aq)(-1,-1,-1),(0,i.aq)(-1,-1,1),(0,i.aq)(-1,1,-1),(0,i.aq)(-1,1,1),(0,i.aq)(1,-1,-1),(0,i.aq)(1,-1,1),(0,i.aq)(1,1,-1),(0,i.aq)(1,1,1)],V=Math.sqrt(3),j=[null];function H(t){return j[0]=t,j}const z=(0,s.E)(),G=(0,i.ap)(),q=(0,i.ap)(),k=(0,i.ap)(),X=new i.cM,Y=(0,s.E)(),Q=(0,s.E)(),W=(0,s.E)(),K=(0,s.E)(),J=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],Z=new i.cM,$=[0,0,0,0,0,0,0,0],tt=g},55333:function(t,n,e){e.r(n),e.d(n,{default:function(){return l}});var r=e(44444),o=e(87792),i=e(38837),s=e(25865),c=e(20241);const u=1e3;function a(t,n,e){const o=(0,i.E)(),s=(0,i.U)(o);return(0,r.h9)(s,s,t,.5),(0,r.h9)(s,s,n,.5),o[3]=(0,r.dR)(s,t),(0,r.dE)(s,s,e),o}let d=class{constructor(){this._idToComponent=new Map,this._components=new s.Y((t=>t.bounds)),this._edges=new s.Y((t=>t.bounds)),this._tmpLineSegment=(0,o.v)(),this._tmpP1=(0,r.ap)(),this._tmpP2=(0,r.ap)(),this._tmpP3=(0,r.ap)(),this.remoteClient=null}async fetchCandidates(t,n){await Promise.resolve(),(0,r.J)(n),await this._ensureEdgeLocations(t,n);const e=[];return this._edges.forEachNeighbor((n=>(this._addCandidates(t,n,e),e.length<u)),t.bounds),{result:{candidates:e}}}async _ensureEdgeLocations(t,n){const e=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:n,uid:r}=t;e.push({id:n,uid:r})}return!0}),t.bounds),!e.length)return;const r={components:e},o=await this.remoteClient.invoke("fetchAllEdgeLocations",r,n??{});for(const i of o.components)this._setFetchEdgeLocations(i)}async add(t){const n=new h(t.id,t.bounds);return this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}}async remove(t){const n=this._idToComponent.get(t.id);if(n){const t=[];this._edges.forEachNeighbor((e=>(e.component===n&&t.push(e),!0)),n.bounds),this._edges.remove(t),this._components.remove([n]),this._idToComponent.delete(n.id)}return{result:{}}}_setFetchEdgeLocations(t){const n=this._idToComponent.get(t.id);if(null==n||t.uid!==n.uid)return;const e=c.m.createView(t.locations),o=new Array(e.count),i=(0,r.ap)(),s=(0,r.ap)();for(let r=0;r<e.count;r++){e.position0.getVec(r,i),e.position1.getVec(r,s);const c=a(i,s,t.origin),u=new T(n,r,c);o[r]=u}this._edges.add(o);const{objectIds:u,origin:d}=t;n.info={locations:e,objectIds:u,origin:d}}_addCandidates(t,n,e){const{info:o}=n.component,{origin:i,objectIds:s}=o,c=o.locations,u=c.position0.getVec(n.index,this._tmpP1),a=c.position1.getVec(n.index,this._tmpP2);(0,r.dE)(u,u,i),(0,r.dE)(a,a,i);const d=s[c.componentIndex.get(n.index)];this._addEdgeCandidate(t,d,u,a,e),f(t,d,u,e),f(t,d,a,e)}_addEdgeCandidate(t,n,e,s,c){if(!t.returnEdge)return;const u=(0,i.U)(t.bounds),a=(0,o.b)(e,s,this._tmpLineSegment),d=(0,o.j)(a,u,this._tmpP3);(0,i.i)(t.bounds,d)&&c.push({type:"edge",objectId:n,target:(0,r.dA)(d),distance:(0,r.dR)(u,d),start:(0,r.dA)(e),end:(0,r.dA)(s)})}};d=(0,r.bt)([(0,r.bv)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],d);const l=d;function f(t,n,e,o){if(!t.returnVertex||!(0,i.i)(t.bounds,e))return;const s=(0,i.U)(t.bounds);o.push({type:"vertex",objectId:n,target:(0,r.dA)(e),distance:(0,r.dR)(s,e)})}class h{constructor(t,n){this.id=t,this.bounds=n,this.info=null,this.uid=++h.uid}}h.uid=0;class T{constructor(t,n,e){this.component=t,this.index=n,this.bounds=e}}},71807:function(t,n,e){var r;e.d(n,{e:function(){return r}}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.ROTATION="rotation",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.START_UP="startUp",t.END_UP="endUp",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},54396:function(t,n,e){e.d(n,{t:function(){return r}});class r{constructor(t,n,e,r,o,i=!1,s=0){this.name=t,this.count=n,this.type=e,this.offset=r,this.stride=o,this.normalized=i,this.divisor=s}}},44877:function(t,n,e){e.d(n,{e:function(){return i}});var r=e(44444),o=e(67026);function i(t,n,e){const i=Array.isArray(t),d=i?t.length/n:t.byteLength/(4*n),l=i?t:new Uint32Array(t,0,d*n),f=e?.minReduction??0,h=e?.originalIndices||null,T=h?h.length:0,_=e?.componentOffsets||null;let O=0;if(_)for(let r=0;r<_.length-1;r++){const t=_[r+1]-_[r];t>O&&(O=t)}else O=d;const m=Math.floor(1.1*O)+1;(null==a||a.length<2*m)&&(a=new Uint32Array((0,r.bC)(2*m)));for(let r=0;r<2*m;r++)a[r]=0;let E=0;const p=!!_&&!!h,g=p?T:d;let N=(0,o.i)(d);const I=new Uint32Array(T),A=1.96;let S=0!==f?Math.ceil(4*A*A/(f*f)*f*(1-f)):g,R=1,M=_?_[1]:g;for(let r=0;r<g;r++){if(r===S){const t=1-E/r;if(t+A*Math.sqrt(t*(1-t)/r)<f)return null;S*=2}if(r===M){for(let t=0;t<2*m;t++)a[t]=0;if(h)for(let t=_[R-1];t<_[R];t++)I[t]=N[h[t]];M=_[++R]}const t=p?h[r]:r,e=t*n,o=u(l,e,n);let i=o%m,c=E;for(;0!==a[2*i+1];){if(a[2*i]===o){const t=a[2*i+1]-1;if(s(l,e,t*n,n)){c=N[t];break}}i++,i>=m&&(i-=m)}c===E&&(a[2*i]=o,a[2*i+1]=t+1,E++),N[t]=c}if(0!==f&&1-E/d<f)return null;if(p){for(let t=_[R-1];t<I.length;t++)I[t]=N[h[t]];N=(0,o.t)(I)}const b=i?new Array(E):new Uint32Array(E*n);E=0;for(let r=0;r<g;r++)N[r]===E&&(c(l,(p?h[r]:r)*n,b,E*n,n),E++);if(h&&!p){const t=new Uint32Array(T);for(let n=0;n<t.length;n++)t[n]=N[h[n]];N=(0,o.t)(t)}return{buffer:Array.isArray(b)?b:b.buffer,indices:N,uniqueCount:E}}function s(t,n,e,r){for(let o=0;o<r;o++)if(t[n+o]!==t[e+o])return!1;return!0}function c(t,n,e,r,o){for(let i=0;i<o;i++)e[r+i]=t[n+i]}function u(t,n,e){let r=0;for(let o=0;o<e;o++)r=t[n+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null},20241:function(t,n,e){e.d(n,{E:function(){return u},d:function(){return nt},f:function(){return K},m:function(){return et},p:function(){return T},u:function(){return J}});var r=e(44877),o=e(43038),i=e(71807),s=e(10717),c=e(44444);const u=(0,o.H)().vec3f(i.e.POSITION).u16(i.e.COMPONENTINDEX).freeze(),a=(0,o.H)().vec2u8(i.e.SIDENESS).freeze();(0,s.t)(a);const d=(0,o.H)().vec3f(i.e.POSITION0).vec3f(i.e.POSITION1).vec2i16(i.e.NORMALCOMPRESSED).u16(i.e.COMPONENTINDEX).u8(i.e.VARIANTOFFSET,{glNormalized:!0}).u8(i.e.VARIANTSTROKE).u8(i.e.VARIANTEXTENSION,{glNormalized:!0}).freeze(),l=(0,o.H)().vec3f(i.e.POSITION0).vec3f(i.e.POSITION1).vec2i16(i.e.NORMALCOMPRESSED).vec2i16(i.e.NORMAL2COMPRESSED).u16(i.e.COMPONENTINDEX).u8(i.e.VARIANTOFFSET,{glNormalized:!0}).u8(i.e.VARIANTSTROKE).u8(i.e.VARIANTEXTENSION,{glNormalized:!0}).freeze();i.e.POSITION0,i.e.POSITION1,i.e.COMPONENTINDEX,i.e.VARIANTOFFSET,i.e.VARIANTSTROKE,i.e.VARIANTEXTENSION,i.e.NORMALCOMPRESSED,i.e.NORMAL2COMPRESSED,i.e.SIDENESS;let f=class{constructor(){this.position0=(0,c.ap)(),this.position1=(0,c.ap)(),this.faceNormal0=(0,c.ap)(),this.faceNormal1=(0,c.ap)(),this.componentIndex=0,this.cosAngle=0}};const h=-1;function T(t,n,e){const r=t.vertices.position,o=t.vertices.componentIndex,i=A.position0,s=A.position1,u=A.faceNormal0,a=A.faceNormal1,{edges:d,normals:l}=E(t),f=d.length/4,T=n.allocate(f);let p=0;const N=f,I=e?.allocate(N);let S=0,R=0,M=0;g.length=0;for(let h=0;h<f;++h){const t=4*h;r.getVec(d.data[t],i),r.getVec(d.data[t+1],s);const n=g.pushNew();n.index=4*h,n.length=(0,c.dR)(i,s)}g.sort(((t,n)=>n.length-t.length));const b=new Array,F=new Array;g.forAll((({length:t,index:f})=>{const E=d.data[f],g=d.data[f+1],N=d.data[f+2],L=d.data[f+3],v=L===h;if(r.getVec(E,i),r.getVec(g,s),v){const t=3*N;(0,c.dQ)(u,l.data[t],l.data[t+1],l.data[t+2]),(0,c.dF)(a,u),A.componentIndex=o.get(E),A.cosAngle=(0,c.al)(u,a)}else{let t=3*N;if((0,c.dQ)(u,l.data[t],l.data[t+1],l.data[t+2]),t=3*L,(0,c.dQ)(a,l.data[t],l.data[t+1],l.data[t+2]),A.componentIndex=o.get(E),A.cosAngle=(0,c.al)(u,a),O(A,C))return;A.cosAngle<-.9999&&(0,c.dF)(a,u)}R+=t,M++,v||_(A,B)?(n.write(T,p++,A),b.push(t)):m(A,P)&&(I&&e&&e.write(I,S++,A),F.push(t))}));const L=new Float32Array(b.reverse()),v=new Float32Array(F.reverse()),D=I&&e?{instancesData:I.slice(0,S),lodInfo:{lengths:v}}:void 0;return{regular:{instancesData:T.slice(0,p),lodInfo:{lengths:L}},silhouette:D,averageEdgeLength:R/M}}function _(t,n){return t.cosAngle<n}function O(t,n){return t.cosAngle>n}function m(t,n){const e=(0,c.dU)(t.cosAngle);return(0,c.dT)(R,t.position1,t.position0),e*((0,c.al)((0,c.am)(S,t.faceNormal0,t.faceNormal1),R)>0?-1:1)>n}function E(t){const n=t.faces.length/3,e=t.faces,r=t.neighbors,o=t.vertices.position;N.length=I.length=0;for(let i=0;i<n;i++){const t=3*i,n=r[t],s=r[t+1],u=r[t+2],a=e[t],d=e[t+1],l=e[t+2];o.getVec(a,M),o.getVec(d,b),o.getVec(l,F),(0,c.dB)(b,b,M),(0,c.dB)(F,F,M),(0,c.am)(M,b,F),(0,c.ao)(M,M),I.pushArray(M),(n===h||a<d)&&(N.push(a),N.push(d),N.push(i),N.push(n)),(s===h||d<l)&&(N.push(d),N.push(l),N.push(i),N.push(s)),(u===h||l<a)&&(N.push(l),N.push(a),N.push(i),N.push(u))}return{edges:N,normals:I}}class p{constructor(){this.index=0,this.length=0}}const g=new c.cM({allocator:t=>t||new p,deallocator:null}),N=new c.cM({deallocator:null}),I=new c.cM({deallocator:null}),A=new f,S=(0,c.ap)(),R=(0,c.ap)(),M=(0,c.ap)(),b=(0,c.ap)(),F=(0,c.ap)(),P=(0,c.fA)(4),C=Math.cos(P),L=(0,c.fA)(35),B=Math.cos(L);function v(t,n,e){const r=n/3,o=new Uint32Array(e+1),i=new Uint32Array(e+1),s=(t,n)=>{t<n?o[t+1]++:i[n+1]++};for(let m=0;m<r;m++){const n=t[3*m],e=t[3*m+1],r=t[3*m+2];s(n,e),s(e,r),s(r,n)}let c=0,u=0;for(let m=0;m<e;m++){const t=o[m+1],n=i[m+1];o[m+1]=c,i[m+1]=u,c+=t,u+=n}const a=new Uint32Array(6*r),d=o[e],l=(t,n,e)=>{if(t<n){const r=o[t+1]++;a[2*r]=n,a[2*r+1]=e}else{const r=i[n+1]++;a[2*d+2*r]=t,a[2*d+2*r+1]=e}};for(let m=0;m<r;m++){const n=t[3*m],e=t[3*m+1],r=t[3*m+2];l(n,e,m),l(e,r,m),l(r,n,m)}const f=(t,n)=>{const e=2*t,r=n-t;for(let o=1;o<r;o++){const t=a[e+2*o],n=a[e+2*o+1];let r=o-1;for(;r>=0&&a[e+2*r]>t;r--)a[e+2*r+2]=a[e+2*r],a[e+2*r+3]=a[e+2*r+1];a[e+2*r+2]=t,a[e+2*r+3]=n}};for(let m=0;m<e;m++)f(o[m],o[m+1]),f(d+i[m],d+i[m+1]);const h=new Int32Array(3*r),T=(n,e)=>n===t[3*e]?0:n===t[3*e+1]?1:n===t[3*e+2]?2:-1,_=(t,n)=>{const e=T(t,n);h[3*n+e]=-1},O=(t,n,e,r)=>{const o=T(t,n);h[3*n+o]=r;const i=T(e,r);h[3*r+i]=n};for(let m=0;m<e;m++){let t=o[m];const n=o[m+1];let e=i[m];const r=i[m+1];for(;t<n&&e<r;){const n=a[2*t],r=a[2*d+2*e];n===r?(O(m,a[2*t+1],r,a[2*d+2*e+1]),t++,e++):n<r?(_(m,a[2*t+1]),t++):(_(r,a[2*d+2*e+1]),e++)}for(;t<n;)_(m,a[2*t+1]),t++;for(;e<r;)_(a[2*d+2*e],a[2*d+2*e+1]),e++}return h}function D(t,n,e,r,o,i=2){const s=1/(Math.abs(e)+Math.abs(r)+Math.abs(o)),c=e*s,u=r*s,a=o<=0?(c>=0?1:-1)*(1-Math.abs(u)):c,d=o<=0?(u>=0?1:-1)*(1-Math.abs(c)):u,l=n*i;t[l]=w(a),t[l+1]=w(d)}function w(t){return(0,c.b0)(Math.round(32767*t),-32767,32767)}const x=.7;let y=class{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?z:H}write(t,n,e){W.seed=this._edgeHashFunction(e);const r=W.getIntRange(0,255),o=W.getIntRange(0,this.settings.variants-1),i=W.getFloat(),s=255*(.5*k(-(1-Math.min(i/x,1))+Math.max(0,i-x)/(1-x),1.2)+.5);t.position0.setVec(n,e.position0),t.position1.setVec(n,e.position1),t.componentIndex.set(n,e.componentIndex),t.variantOffset.set(n,r),t.variantStroke.set(n,o),t.variantExtension.set(n,s)}};const U=new Float32Array(6),V=new Uint32Array(U.buffer),j=new Uint32Array(1);function H(t){return U[0]=t.position0[0],U[1]=t.position0[1],U[2]=t.position0[2],U[3]=t.position1[0],U[4]=t.position1[1],U[5]=t.position1[2],j[0]=31*(31*(31*(31*(31*(166811+V[0])+V[1])+V[2])+V[3])+V[4])+V[5],j[0]}function z(t){const n=U;n[0]=q(t.position0[0]),n[1]=q(t.position0[1]),n[2]=q(t.position0[2]),n[3]=q(t.position1[0]),n[4]=q(t.position1[1]),n[5]=q(t.position1[2]),j[0]=5381;for(let e=0;e<V.length;e++)j[0]=31*j[0]+V[e];return j[0]}const G=1e4;function q(t){return Math.round(t*G)/G}function k(t,n){return Math.abs(t)**n*Math.sign(t)}class X{constructor(){this._commonWriter=new y}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return d.createBuffer(t)}write(t,n,e){this._commonWriter.write(t,n,e),(0,c.dE)(Q,e.faceNormal0,e.faceNormal1),(0,c.ao)(Q,Q);const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;D(r,n,Q[0],Q[1],Q[2],o)}}X.Layout=d,X.glLayout=(0,s.t)(d,1);class Y{constructor(){this._commonWriter=new y}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return l.createBuffer(t)}write(t,n,e){this._commonWriter.write(t,n,e);{const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;D(r,n,e.faceNormal0[0],e.faceNormal0[1],e.faceNormal0[2],o)}{const{typedBuffer:r,typedBufferStride:o}=t.normal2Compressed;D(r,n,e.faceNormal1[0],e.faceNormal1[1],e.faceNormal1[2],o)}}}Y.Layout=l,Y.glLayout=(0,s.t)(l,1);const Q=(0,c.ap)(),W=new c.mj;function K(t){const n=J(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return $.updateSettings(t.writerSettings),tt.updateSettings(t.writerSettings),T(n,$,tt)}function J(t,n,e,o){if(n){const n=v(e,o,t.count);return new Z(e,o,n,t)}const i=(0,r.e)(t.buffer,t.stride/4,{originalIndices:e,originalIndicesLength:o}),s=v(i.indices,o,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:s,vertices:u.createView(i.buffer)}}class Z{constructor(t,n,e,r){this.faces=t,this.facesLength=n,this.neighbors=e,this.vertices=r}}const $=new X,tt=new Y,nt=(0,o.H)().vec3f(i.e.POSITION0).vec3f(i.e.POSITION1),et=(0,o.H)().vec3f(i.e.POSITION0).vec3f(i.e.POSITION1).u16(i.e.COMPONENTINDEX)},10717:function(t,n,e){e.d(n,{t:function(){return i}});var r=e(44444),o=e(54396);function i(t,n=0){const e=t.stride;return Array.from(t.fields.keys()).map((r=>{const i=t.fields.get(r),c=i.constructor.ElementCount,u=s(i.constructor.ElementType),a=i.offset,d=i.optional?.glNormalized??!1;return new o.t(r,c,u,a,e,d,n)}))}function s(t){const n=c[t];if(n)return n;throw new Error("BufferType not supported in WebGL")}const c={u8:r.aC.UNSIGNED_BYTE,u16:r.aC.UNSIGNED_SHORT,u32:r.aC.UNSIGNED_INT,i8:r.aC.BYTE,i16:r.aC.SHORT,i32:r.aC.INT,f32:r.aC.FLOAT}},87792:function(t,n,e){e.d(n,{A:function(){return d},M:function(){return u},b:function(){return c},j:function(){return a},v:function(){return s}});var r=e(44444),o=e(38837),i=e(81203);function s(t){return t?{origin:(0,r.dA)(t.origin),vector:(0,r.dA)(t.vector)}:{origin:(0,r.ap)(),vector:(0,r.ap)()}}function c(t,n,e=s()){return(0,r.dF)(e.origin,t),(0,r.dB)(e.vector,n,t),e}function u(t,n){const e=(0,r.dB)(i.c.get(),n,t.origin),o=(0,r.al)(t.vector,e),s=(0,r.al)(t.vector,t.vector),c=(0,r.b0)(o/s,0,1),u=(0,r.dB)(i.c.get(),(0,r.dC)(i.c.get(),t.vector,c),e);return(0,r.al)(u,u)}function a(t,n,e){return d(t,n,0,1,e)}function d(t,n,e,o,s){const{vector:c,origin:u}=t,a=(0,r.dB)(i.c.get(),n,u),d=(0,r.al)(c,a)/(0,r.dD)(c);return(0,r.dC)(s,c,(0,r.b0)(d,e,o)),(0,r.dE)(s,s,t.origin)}new o.s((()=>s()))},10769:function(t,n,e){function r(){return[1,0,0,0,1,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function i(t,n,e,r,o,i,s,c,u){return[t,n,e,r,o,i,s,c,u]}function s(t,n){return new Float64Array(t,n,9)}e.d(n,{e:function(){return r},o:function(){return c},t:function(){return i}});const c=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:c,clone:o,create:r,createView:s,fromValues:i},Symbol.toStringTag,{value:"Module"}))},77703:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,n,e,r,o,i,s,c,u,a,d,l,f,h,T,_){return[t,n,e,r,o,i,s,c,u,a,d,l,f,h,T,_]}function s(t,n){return new Float64Array(t,n,16)}e.d(n,{e:function(){return r},o:function(){return c},r:function(){return o}});const c=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:c,clone:o,create:r,createView:s,fromValues:i},Symbol.toStringTag,{value:"Module"}))},81203:function(t,n,e){e.d(n,{D:function(){return I},H:function(){return z},J:function(){return G},M:function(){return N},O:function(){return S},P:function(){return x},Q:function(){return k},U:function(){return R},V:function(){return X},a:function(){return O},b:function(){return u},c:function(){return T},d:function(){return g},f:function(){return c},g:function(){return p},h:function(){return A},k:function(){return y},l:function(){return M},m:function(){return E},o:function(){return m},p:function(){return b},q:function(){return V},r:function(){return _},t:function(){return h},u:function(){return a},v:function(){return F},w:function(){return j},x:function(){return U},y:function(){return w},z:function(){return H}});var r=e(44444),o=e(10769),i=e(77703),s=e(83875);function c(t,n){return(0,r.al)(t,n)/(0,r.dS)(t)}function u(t,n){const e=(0,r.al)(t,n)/((0,r.dS)(t)*(0,r.dS)(n));return-(0,r.dU)(e)}function a(t,n,e){(0,r.ao)(d,t),(0,r.ao)(l,n);const o=(0,r.al)(d,l),i=(0,r.dU)(o),s=(0,r.am)(d,d,l);return(0,r.al)(s,e)<0?2*Math.PI-i:i}const d=(0,r.ap)(),l=(0,r.ap)();let f=class t{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.kB)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new t(r.g_)}static createVec3f64(){return new t(r.ap)}static createVec4f64(){return new t(r.iB)}static createMat3f64(){return new t(o.e)}static createMat4f64(){return new t(i.e)}static createQuatf64(){return new t(s.e)}get test(){}};const h=f.createVec2f64(),T=f.createVec3f64(),_=f.createVec4f64();f.createMat3f64();const O=f.createMat4f64(),m=f.createQuatf64();function E(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function p(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),o=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),i=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,r.dQ)(t,e,o,i),t}function g(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,r.dQ)(n,0,1,0):(0,r.dQ)(n,1,0,0),(0,r.am)(e,t,n),(0,r.am)(n,e,t),(0,r.ao)(e,e),(0,r.ao)(n,n)}function N(t=K){return[t[0],t[1],t[2],t[3]]}function I(t=K[0],n=K[1],e=K[2],r=K[3]){return R(t,n,e,r,_.get())}function A(t,n){return R(n[0],n[1],n[2],n[3],t)}function S(t){return t}function R(t,n,e,r,o=N()){return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function M(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function b(t,n,e,r=N()){const o=e[0]-n[0],i=e[1]-n[1],s=e[2]-n[2],c=t[0]-n[0],u=t[1]-n[1],a=t[2]-n[2],d=i*a-s*u,l=s*c-o*a,f=o*u-i*c,h=d*d+l*l+f*f,T=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;return r[0]=d*T,r[1]=l*T,r[2]=f*T,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function F(t,n,e,o=0,i=Math.floor(e*(1/3)),s=Math.floor(e*(2/3))){if(e<3)return!1;n(C,o);let c=i,u=!1;for(;c<e-1&&!u;)n(L,c),c++,u=!(0,r.H)(C,L);if(!u)return!1;for(c=Math.max(c,s),u=!1;c<e&&!u;)n(B,c),c++,(0,r.dB)(v,C,L),(0,r.ao)(v,v),(0,r.dB)(D,L,B),(0,r.ao)(D,D),u=!(0,r.H)(C,B)&&!(0,r.H)(L,B)&&Math.abs((0,r.al)(v,D))<P;return u?(b(C,L,B,t),!0):(0!==o||1!==i||2!==s)&&F(t,n,e,0,1,2)}const P=.99619469809,C=(0,r.ap)(),L=(0,r.ap)(),B=(0,r.ap)(),v=(0,r.ap)(),D=(0,r.ap)();function w(t,n,e){return n!==t&&A(t,n),t[3]=-(0,r.al)(t,e),t}function x(t,n,e,o){return(0,r.am)(B,n,t),M(e,B,o)}function y(t,n,e,o){return Q(W(t,n,(0,r.dB)(T.get(),e,n),Z,o))}function U(t,n,e){return null!=n&&Q(W(t,n.origin,n.direction,$,e))}function V(t,n,e){return Q(W(t,n.origin,n.vector,J.NONE,e))}function j(t,n,e){return Q(W(t,n.origin,n.vector,J.CLAMP,e))}function H(t,n){return X(t,n)>=0}function z(t,n,e){const o=(0,r.dC)(T.get(),t,-t[3]),i=q(t,(0,r.dB)(T.get(),n,o),T.get());return(0,r.dE)(e,i,o),e}function G(t,n,e,o){const i=t,s=T.get(),u=T.get();g(i,s,u);const a=(0,r.dB)(T.get(),e,n),d=c(s,a),l=c(u,a),f=c(i,a);return(0,r.dQ)(o,d,l,f)}function q(t,n,e){const o=(0,r.dC)(T.get(),t,(0,r.al)(t,n));return(0,r.dB)(e,n,o),e}function k(t,n){return Math.abs(X(t,n))}function X(t,n){return(0,r.al)(t,n)+t[3]}var Y;function Q(t){return t===Y.INTERSECTS_INSIDE_OUT||t===Y.INTERSECTS_OUTSIDE_IN}function W(t,n,e,o,i){const s=(0,r.al)(t,e),c=X(t,n);if(0===s)return c>=0?Y.INSIDE:Y.OUTSIDE;let u=-c/s;return o&J.CLAMP&&(u=(0,r.b0)(u,0,1)),!(o&J.INFINITE_MIN)&&u<0||!(o&J.INFINITE_MAX)&&u>1?c>=0?Y.INSIDE:Y.OUTSIDE:((0,r.dE)(i,n,(0,r.dC)(i,e,u)),c>=0?Y.INTERSECTS_INSIDE_OUT:Y.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(Y||(Y={}));const K=[0,0,1,0];var J;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(J||(J={}));const Z=J.INFINITE_MIN|J.INFINITE_MAX,$=J.INFINITE_MAX},83875:function(t,n,e){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}function i(t,n,e,r){return[t,n,e,r]}e.d(n,{e:function(){return r},r:function(){return s},t:function(){return o}});const s=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,fromValues:i},Symbol.toStringTag,{value:"Module"}))},38837:function(t,n,e){e.d(n,{$:function(){return z},E:function(){return E},H:function(){return y},I:function(){return v},N:function(){return M},O:function(){return I},T:function(){return A},U:function(){return b},V:function(){return F},_:function(){return p},a:function(){return N},b:function(){return c},f:function(){return $},i:function(){return W},k:function(){return a},s:function(){return i},v:function(){return d},w:function(){return h}});var r=e(44444),o=(e(10769),e(81203));class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.kB)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,s));t++)this._items.push(this._allocator())}}const s=1024;function c(t){return t?u((0,r.dA)(t.origin),(0,r.dA)(t.direction)):u((0,r.ap)(),(0,r.ap)())}function u(t,n){return{origin:t,direction:n}}function a(t,n){const e=_.get();return e.origin=t,e.direction=n,e}function d(t,n=c()){return f(t.origin,t.direction,n)}function l(t,n,e=c()){return(0,r.dF)(e.origin,t),(0,r.dB)(e.direction,n,t),e}function f(t,n,e=c()){return(0,r.dF)(e.origin,t),(0,r.dF)(e.direction,n),e}function h(t,n){const e=(0,r.am)(o.c.get(),(0,r.ao)(o.c.get(),t.direction),(0,r.dB)(o.c.get(),n,t.origin));return(0,r.al)(e,e)}function T(t,n,e){const o=(0,r.al)(t.direction,(0,r.dB)(e,n,t.origin));return(0,r.dE)(e,t.origin,(0,r.dC)(e,t.direction,o)),e}const _=new i((()=>c()));function O(t,n){const e=(0,r.dS)(t),o=(0,r.kC)(t[2]/e),i=Math.atan2(t[1]/e,t[0]/e);return(0,r.dQ)(n,e,o,i),n}const m=E();function E(){return(0,r.iB)()}const p=r.ak,g=r.ak;function N(t,n){return(0,r.aa)(n,t)}function I(t,n){return(0,r.iV)(t[0],t[1],t[2],n)}function A(t){return t}function S(t){t[0]=t[1]=t[2]=t[3]=0}function R(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function M(t){return t[3]}function b(t){return t}function F(t,n,e,o){return(0,r.iV)(t,n,e,o)}function P(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e}function C(t,n,e){return t!==e&&N(t,e),e}function L(t,n){return n}function B(t,n,e){if(null==n||!w(t,n,D))return!1;let{t0:r,t1:o}=D;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(e){const{origin:t,direction:o}=n;e[0]=t[0]+o[0]*r,e[1]=t[1]+o[1]*r,e[2]=t[2]+o[2]*r}return!0}function v(t,n,e){const o=l(n,e);if(!w(t,o,D))return[];const{origin:i,direction:s}=o,{t0:c,t1:u}=D,a=n=>{const e=(0,r.ap)();return(0,r.h9)(e,i,s,n),z(t,e,e)};return Math.abs(c-u)<(0,r.a9)()?[a(c)]:[a(c),a(u)]}const D={t0:0,t1:0};function w(t,n,e){const{origin:r,direction:o}=n,i=x;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===s)return!1;const c=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),u=c*c-4*s*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return e.t0=(-c-a)/(2*s),e.t1=(-c+a)/(2*s),!0}const x=(0,r.ap)();function y(t,n){return B(t,n,null)}function U(t,n,e){if(B(t,n,e))return e;const i=V(t,n,o.c.get());return(0,r.dE)(e,n.origin,(0,r.dC)(o.c.get(),n.direction,(0,r.dR)(n.origin,i)/(0,r.dS)(n.direction))),e}function V(t,n,e){const i=o.c.get(),s=o.a.get();(0,r.am)(i,n.origin,n.direction);const c=M(t);(0,r.am)(e,i,n.origin),(0,r.dC)(e,e,1/(0,r.dS)(e)*c);const u=q(t,n.origin),a=(0,o.b)(n.origin,e);return(0,r.dY)(s,a+u,i),(0,r.dX)(e,e,s),e}function j(t,n,e,r){const o=M(t),i=o*o,s=n+.5*Math.PI,c=e*e+i-2*Math.cos(s)*e*o,u=Math.sqrt(c),a=c-i;if(a<=0)return.5;const d=Math.sqrt(a),l=Math.acos(d/u)-Math.asin(o/(u/Math.sin(s)));return Math.min(1,(l+.5*r)/r)}function H(t,n,e){return B(t,n,e)?e:(T(n,t,e),z(t,e,e))}function z(t,n,e){const i=(0,r.dB)(o.c.get(),n,t),s=(0,r.dC)(o.c.get(),i,t[3]/(0,r.dS)(i));return(0,r.dE)(e,s,t)}function G(t,n){const e=(0,r.dB)(o.c.get(),n,t),i=(0,r.dD)(e),s=t[3]*t[3];return Math.sqrt(Math.abs(i-s))}function q(t,n){const e=(0,r.dB)(o.c.get(),n,t),i=(0,r.dS)(e),s=M(t),c=s+Math.abs(s-i);return(0,r.dU)(s/c)}const k=(0,r.ap)();function X(t,n,e,o){const i=(0,r.dB)(k,n,t);switch(e){case r.dZ.X:{const t=O(i,k)[2];return(0,r.dQ)(o,-Math.sin(t),Math.cos(t),0)}case r.dZ.Y:{const t=O(i,k),n=t[1],e=t[2],s=Math.sin(n);return(0,r.dQ)(o,-s*Math.cos(e),-s*Math.sin(e),Math.cos(n))}case r.dZ.Z:return(0,r.ao)(o,i);default:return}}function Y(t,n){const e=(0,r.dB)(J,n,t);return(0,r.dS)(e)-t[3]}function Q(t,n,e,o){const i=Y(t,n),s=X(t,n,r.dZ.Z,J),c=(0,r.dC)(J,s,e-i);return(0,r.dE)(o,n,c)}function W(t,n){const e=(0,r.iY)(t,n),o=M(t);return e<=o*o}function K(t,n,e=(0,r.iB)()){const o=(0,r.dR)(t,n),i=t[3],s=n[3];return o+s<i?((0,r.aa)(e,t),e):o+i<s?((0,r.aa)(e,n),e):((0,r.iX)(e,t,n,(o+s-i)/(2*o)),e[3]=(o+i+s)/2,e)}const J=(0,r.ap)(),Z=E(),$=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:m,altitudeAt:Y,angleToSilhouette:q,axisAt:X,cameraFrustumCoverage:j,clear:S,closestPoint:H,closestPointOnSilhouette:V,containsPoint:W,copy:N,create:E,distanceToSilhouette:G,elevate:P,equals:g,exactEquals:p,fromCenterAndRadius:I,fromRadius:R,fromValues:F,getCenter:b,getExtent:L,getRadius:M,intersectLine:v,intersectRay:B,intersectRayClosestSilhouette:U,intersectsRay:y,projectPoint:z,setAltitudeAt:Q,setExtent:C,tmpSphere:Z,union:K,wrap:A},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=5333.fc3789be.js.map