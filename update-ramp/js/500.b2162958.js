"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[500],{40500:function(e,l,t){t.r(l),t.d(l,{default:function(){return oe}});var a=t(44444),i=t(53906);const n={key:0,class:"relative"},s={key:0,class:"relative"},u=["innerHTML"],r=["src"],o={key:1,class:"w-32 h-32"},d={class:"symbologyIcon"},f=["innerHTML"],c=["src"],v={class:"badge z-50 rounded-full text-white absolute h-10 w-10 p-8 inline-flex items-center justify-center"},p={key:0,class:"px-5"},g={key:1,class:"inline-flex justify-center items-center relative"},y=(0,a.fI)({__name:"symbology-stack",props:{layer:{type:Object,required:!0},result:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.f$)([]);return(0,a.g4)((()=>{t.value=l.layer.legend})),(l,i)=>e.result.loaded?((0,a.fQ)(),(0,a.fU)("div",n,[(0,a.fT)("div",{class:(0,a.fW)(0===e.result.items.length?"opacity-50":"")},[t.value.length>1?((0,a.fQ)(),(0,a.fU)("div",s,[((0,a.fQ)(!0),(0,a.fU)(a.fZ,null,(0,a.fV)(t.value.slice(0,3).reverse(),((e,l)=>((0,a.fQ)(),(0,a.fU)("div",{class:(0,a.fW)(["absolute",[0==l?"symbol-0":1==l?"left-3":"left-6"]]),style:(0,a.kq)({"z-index":3-l}),key:l},[t.value[l].svgcode?((0,a.fQ)(),(0,a.fU)("span",{key:0,class:"symbologyIcon w-28 h-28",innerHTML:t.value[l].svgcode},null,8,u)):t.value[l].imgUrl?((0,a.fQ)(),(0,a.fU)("img",{key:1,class:"symbologyIcon w-28 h-28",src:t.value[l].imgUrl},null,8,r)):(0,a.g7)("",!0)],6)))),128))])):t.value.length>0?((0,a.fQ)(),(0,a.fU)("div",o,[(0,a.fT)("div",d,[t.value[0].svgcode?((0,a.fQ)(),(0,a.fU)("span",{key:0,innerHTML:t.value[0].svgcode},null,8,f)):t.value[0].imgUrl?((0,a.fQ)(),(0,a.fU)("img",{key:1,class:"symbologyIcon w-full h-full",src:t.value[0].imgUrl},null,8,c)):(0,a.g7)("",!0)])])):(0,a.g7)("",!0)],2),(0,a.fT)("div",v,[e.result.loaded?((0,a.fQ)(),(0,a.fU)("div",p,(0,a.fX)(e.result.items.length),1)):(0,a.g7)("",!0)])])):((0,a.fQ)(),(0,a.fU)("div",g,i[0]||(i[0]=[(0,a.fT)("div",{class:"symbologyIcon h-32 w-32"},[(0,a.fT)("div",{class:"relative animate-spin spinner h-24 w-24"})],-1)])))}}),m=(0,a.jO)(y,[["__scopeId","data-v-496d788d"]]),h=["content"],b={class:"symbologyLayerName truncate"},k=(0,a.fI)({__name:"symbology-item",props:{layer:{type:Object,required:!0},result:{type:Object,required:!0},selected:{type:Boolean,required:!0}},setup(e){const l=(0,a.jV)(),t=(0,a.fM)((()=>l.properties)),i=e,n=()=>{const e=i.layer;return e&&t.value[e.id]&&t.value[e.id].name?t.value[e.id].name:e?.name??""};return(l,t)=>{const i=(0,a.fO)("tippy");return(0,a.fP)(((0,a.fQ)(),(0,a.fU)("button",{class:(0,a.fW)(["flex flex-grow justify-start items-center px-7 py-10 default-focus-style symbologyStackButton truncate",e.selected?"detailsButtonSelected":"px-11"]),onClick:t[0]||(t[0]=(0,a.kb)((()=>{}),["stop"])),content:n()},[(0,a.h4)(m,{class:"symbStack w-32 h-32 mr-10",layer:e.layer,result:e.result},null,8,["layer","result"]),(0,a.fT)("div",b,(0,a.fX)(n()),1)],10,h)),[[i,{placement:"right",sticky:!0}]])}}}),x=["content"],T=(0,a.fI)({__name:"symbology-list",props:{results:{type:Object,required:!0},selected:{type:String,required:!0}},emits:["selection-changed"],setup(e,{emit:l}){const{t:t}=(0,a.fJ)(),i=(0,a.oe)(),n=(0,a.f$)(),s=()=>{n.value._tippy.hide()},u=e=>{"Tab"===e.key&&n.value?.matches(":focus")&&n.value._tippy.show()},r=l,o=e,d=(0,a.f$)(""),f=(0,a.f$)([]),c=(0,a.f$)(!1),v=(0,a.f$)(!1),p=e=>i.getLayerByUid(e),g=e=>{d.value=e,r("selection-changed",e),c.value=!1},y=()=>{v.value||setTimeout((()=>{c.value=v.value}),500),v.value=!0},m=()=>{c.value=v.value=!1},h=()=>{v.value||(c.value=!0),v.value=!0},b=()=>{c.value=v.value=!1};return(0,a.g2)((()=>{f.value.push((0,a.g3)(o,(()=>{d.value=o.selected})))})),(0,a.g4)((()=>{n.value?.addEventListener("blur",s),n.value?.addEventListener("keyup",u)})),(0,a.g5)((()=>{f.value.forEach((e=>e())),n.value?.removeEventListener("blur",s),n.value?.removeEventListener("keyup",u)})),(e,l)=>{const i=(0,a.fO)("focus-item"),s=(0,a.fO)("focus-list"),u=(0,a.fO)("tippy");return(0,a.fP)(((0,a.fQ)(),(0,a.fU)("div",{class:(0,a.fW)(["symbology-list absolute overflow-hidden z-50 p-0 w-48 bg-white text-sm inline-flex flex-col",{"symbology-list-expanded":c.value}]),onMouseover:y,onMouseleave:m,onFocus:h,onBlur:(0,a.kb)(b,["self"]),content:(0,a.fY)(t)("details.layers.results.list.tooltip"),ref_key:"el",ref:n},[((0,a.fQ)(!0),(0,a.fU)(a.fZ,null,(0,a.fV)(o.results,((e,l)=>((0,a.fQ)(),(0,a.fU)("div",{class:"flex justify-start relative",key:l},[(0,a.fP)(((0,a.fQ)(),(0,a.fR)(k,{key:e.uid,layer:p(e.uid),result:e,selected:e.uid===d.value,onClick:l=>g(e.uid)},null,8,["layer","result","selected","onClick"])),[[i]])])))),128))],42,x)),[[s],[u,{trigger:"manual",placement:"top-start",touch:!1}]])}}}),w={class:"inline font-bold"},O=["innerHTML"],M=(0,a.fI)({__name:"esri-default",props:{fixtureFields:{type:Object,required:!1},fields:{type:Object,required:!0},identifyData:{type:Object,required:!0}},setup(e){const{t:l}=(0,a.fJ)(),t=(0,a.f_)("iApi"),i=e,n=(e,l,t,a)=>{const i=e.find((e=>e[l].toLowerCase()===t.toLowerCase()));i&&delete a[i.name]},s=()=>{const e=Object.assign({},i.identifyData.data);n(i.fields,"type","geometry",e),t?.ui.exposeOids||n(i.fields,"type","oid",e),t?.ui.exposeMeasurements||(n(i.fields,"name","shape_length",e),n(i.fields,"name","shape_area",e));const l={};i.fields.forEach((e=>{const t=i.fixtureFields?.find((l=>e.name===l.field));l[e.name]={name:t?.alias||e.alias||e.name,type:e.type,visible:t?.visible??!0}}));const a={};Object.keys(e).forEach((i=>{const n=l[i];if(n&&n.visible){const l=e[i];a[i]={value:"number"==typeof l?t?.ui.formatNumber(l):l,alias:n.name,type:n.type}}}));for(const[i]of Object.entries(a))t.ui.isPlainText(a[i].value)&&(a[i].value=t.ui.escapeHtml(a[i].value));return a},u=(e,l,t)=>{switch(t){case"date":return o(e);default:return r(e,l)}},r=(e,t)=>{if(!e)return e;if(e.trim().match(/\.(jpeg|jpg|gif|png)$/)||e.trim().match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i))return`<img src="${e}" alt="${l("details.item.alert.defaultAltText",{alias:t})}" />`;const i="underline text-blue-700 break-all",n=document.createElement("div");return n.innerHTML=e.trim(),"A"==n.firstElementChild?.tagName?(n.firstElementChild.className=i,n.innerHTML):(0,a.pI)(e,{className:i,target:"_blank",validate:{url:e=>/^https?:\/\//.test(e)}})},o=e=>{const l=parseInt(e);return isNaN(l)?e:new Date(l).toISOString().split("T")[0]};return(e,l)=>((0,a.fQ)(),(0,a.fU)("div",null,[((0,a.fQ)(!0),(0,a.fU)(a.fZ,null,(0,a.fV)(s(),((e,t,i)=>((0,a.fQ)(),(0,a.fU)("div",{class:"p-5 pl-3 flex justify-end flex-wrap even:bg-gray-300",key:i},[(0,a.fT)("span",w,(0,a.fX)(e.alias),1),l[0]||(l[0]=(0,a.fT)("span",{class:"flex-auto"},null,-1)),(0,a.fT)("span",{class:"inline",innerHTML:u(e.value,e.alias,e.type)},null,8,O)])))),128))]))}}),L=["innerHTML"],U={key:1},Q=(0,a.fI)({__name:"html-default",props:{identifyData:{type:Object,required:!0}},setup(e){const{t:l}=(0,a.fJ)();return(t,i)=>e.identifyData?((0,a.fQ)(),(0,a.fU)("div",{key:0,class:"whitespace-pre-wrap break-words h-full overflow-auto",innerHTML:e.identifyData.data.data??e.identifyData.data},null,8,L)):((0,a.fQ)(),(0,a.fU)("div",U,(0,a.fX)((0,a.fY)(l)("details.layers.results.empty")),1))}}),_={class:"relative flex flex-grow truncate"},j={key:0,class:"flex flex-grow items-center truncate"},q={class:"flex p-8 items-center"},$=["innerHTML"],E={key:1,class:"symbologyIcon p-6"},I=["content","innerHTML","tabindex"],C={key:1,class:"flex p-6 flex-grow"},S={key:2,class:"zoomButton text-center p-3"},D=["content","aria-label"],H={key:0,class:"m-auto animate-spin spinner h-20 w-20"},z={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"green",class:"m-auto w-20 h-20"},Y={key:2,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"red",class:"m-auto w-20 h-20"},P=["innerHTML"],V=(0,a.fI)({__name:"result-item",props:{uid:{type:String,required:!0},data:{type:Object,required:!0},open:{type:Boolean,required:!1},inList:{type:Boolean,required:!1}},setup(e){const l=(0,a.oe)(),t=e,i=(0,a.f_)("iApi"),n=(0,a.f$)([]),s=(0,a.jV)(),{t:u}=(0,a.fJ)(),r=(0,a.f$)(""),o=(0,a.f$)("none"),d=(0,a.f$)(),f=()=>l.getLayerByUid(t.uid),c=(0,a.fM)((()=>s.properties)),v=(0,a.fM)((()=>s.defaultTemplates)),p=(0,a.fM)((()=>f()?.supportsFeatures??!1)),g=(0,a.fM)((()=>f()?.mapLayer??!1)),y=(0,a.fM)((()=>{const e=f()?.nameField;let l=e&&t.data.loaded?t.data.data[e]:i.$i18n.t("details.items.title");return i.ui.isPlainText(l)&&(l=i.ui.escapeHtml(l)),l})),m=e=>{if("string"==typeof e){const l="underline text-blue-700 break-all",t=document.createElement("div");return t.innerHTML=e.trim(),"A"==t.firstElementChild?.tagName?(t.firstElementChild.className=l,t.innerHTML):(0,a.pI)(e,{className:l,target:"_blank",validate:{url:e=>/^https?:\/\//.test(e)}})}return e},h=()=>{w("none"),t.data.loaded?b():t.data.load().then((()=>{b()}))},b=()=>{if(r.value="",!t.data||!t.data.loaded)return;const e=f();if(void 0!==e){if(e.supportsFeatures){const l=e.oidField;e.getIcon(t.data.data[l]).then((e=>{r.value=e}))}}else console.warn(`could not find layer for uid ${t.uid} during icon lookup`)},k=(0,a.fM)((()=>{const e=f();return e&&c.value[e.id]&&c.value[e.id].template?c.value[e.id].template:v.value&&v.value[t.data.format]?v.value[t.data.format]:p.value?M:Q})),x=(0,a.fM)((()=>p.value&&f()?.fields||[])),T=(0,a.fM)((()=>{const e=f();if(e&&c.value[e.id]&&c.value[e.id].fields)return c.value[e.id].fields})),w=e=>{"zoomed"===e||"error"===e?setTimeout((()=>{o.value=e,d.value?._tippy.show(),setTimeout((()=>{d.value?._tippy.hide(),o.value="none"}),3e3)}),300):o.value=e},O=()=>{if("none"!==o.value)return;w("zooming");const e=f();if(void 0===e||!e.isLoaded)return console.warn(`Could not find layer for uid ${t.uid} during zoom geometry lookup`),void w("error");if(!t.data.loaded)return console.warn("Details zoomToFeature call on item that is still loading. Should be impossible, alert the devs."),void w("error");const l=t.data.data[e.oidField],n=()=>{const t={getGeom:!0};e.getGraphic(l,t).then((e=>{e.geometry.invalid()?(console.error(`Could not find graphic for objectid ${l}`),w("error")):(i.geo.map.zoomMapTo(e.geometry),w("zoomed"),i.updateAlert(i.$i18n.t("details.item.alert.zoom")))})).catch((()=>{w("error")}))};e.layerType===a.kj.FEATURE&&e.geomType!==a.pJ.POINT?e.getGraphicExtent(l).then((e=>{i.geo.map.zoomMapTo(e),w("zoomed"),i.updateAlert(i.$i18n.t("details.item.alert.zoom"))})).catch((()=>{n()})):n()};return(0,a.g2)((()=>{n.value.push((0,a.g3)(t,(()=>{h()}),{deep:!1,immediate:!0}))})),(0,a.g5)((()=>{n.value.forEach((e=>e()))})),(l,t)=>{const n=(0,a.fO)("truncate"),s=(0,a.fO)("tippy");return(0,a.fQ)(),(0,a.fU)(a.fZ,null,[(0,a.fT)("div",_,[p.value?((0,a.fQ)(),(0,a.fU)("div",j,[(0,a.fT)("div",q,[e.data.loaded&&r.value?((0,a.fQ)(),(0,a.fU)("span",{key:0,class:"flex-none symbologyIcon",innerHTML:r.value},null,8,$)):((0,a.fQ)(),(0,a.fU)("div",E,t[1]||(t[1]=[(0,a.fT)("div",{class:"animate-spin spinner h-20 w-20"},null,-1)])))]),e.data.loaded?(0,a.fP)(((0,a.fQ)(),(0,a.fU)("span",{key:0,class:"pl-3 text-left flex-grow itemName",content:y.value,innerHTML:m(y.value),tabindex:e.inList?-1:0},null,8,I)),[[n,{options:{placement:"right"}}]]):((0,a.fQ)(),(0,a.fU)("div",C,(0,a.fX)((0,a.fY)(u)("details.loading")),1)),e.data.loaded?((0,a.fQ)(),(0,a.fU)("span",S,[g.value?(0,a.fP)(((0,a.fQ)(),(0,a.fU)("button",{key:0,type:"button",content:(0,a.fY)(u)("details.item.zoom"+("none"===o.value?"":`.${o.value}`)),"aria-label":(0,a.fY)(u)("grid.cells.zoom"+("none"===o.value?"":`.${o.value}`)),ref_key:"zoomButton",ref:d,onClick:t[0]||(t[0]=e=>{e.stopPropagation(),O()}),class:"text-gray-600 w-24 h-24 p-2 flex justify-center items-center"},["zooming"===o.value?((0,a.fQ)(),(0,a.fU)("div",H)):"zoomed"===o.value?((0,a.fQ)(),(0,a.fU)("svg",z,t[2]||(t[2]=[(0,a.fT)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)]))):"error"===o.value?((0,a.fQ)(),(0,a.fU)("svg",Y,t[3]||(t[3]=[(0,a.fT)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):((0,a.fQ)(),(0,a.fU)("span",{key:3,innerHTML:(0,a.fY)(i).ui.getZoomIcon()},null,8,P))],8,D)),[[s,{placement:"bottom"}]]):(0,a.g7)("",!0)])):(0,a.g7)("",!0)])):(0,a.g7)("",!0)]),e.open?((0,a.fQ)(),(0,a.fR)((0,a.mt)(k.value),{key:0,identifyData:e.data,fields:x.value,fixtureFields:T.value,class:"p-8"},null,8,["identifyData","fields","fixtureFields"])):(0,a.g7)("",!0)],64)}}}),N={key:0,class:"layerName w-full flex-grow p-5 pb-8 font-bold truncate",tabIndex:"0"},B={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},A={for:"toggle"},X={key:2,class:"flex flex-col justify-between p-8 mb-8 bg-gray-100"},F={class:"flex"},W=["aria-label"],G=["content","aria-label","disabled"],R={class:"px-3 text-center flex-grow"},J=["content","aria-label","disabled"],Z={key:3},K={key:0},ee=["content"],le=["onClick"],te={key:1,class:"text-center"},ae={key:4,class:"p-5"},ie=(0,a.fI)({__name:"result-list",props:{uid:{type:String,required:!0},results:{type:Object,required:!0}},setup(e){const l=(0,a.f$)(),t=()=>{l.value._tippy.hide()},n=e=>{"Tab"===e.key&&l.value?.matches(":focus")&&l.value._tippy.show()},s=(0,a.f_)("iApi"),u=(0,a.jV)(),r=(0,a.oe)(),o=e,{t:d}=(0,a.fJ)(),f=(0,a.f$)(!1),c=(0,a.f$)(s.fixture.get("details")),v=(0,a.f$)(!0),p=(0,a.f$)(!1),g=(0,a.f$)(0),y=(0,a.f$)(20),m=(0,a.f$)([]),h=(0,a.f$)([]),b=(0,a.fM)((()=>u.activeGreedy)),k=(0,a.fM)((()=>u.properties)),x=(0,a.fM)((()=>g.value+y.value)),T=()=>r.getLayerByUid(o.uid),w=()=>o.results.find((e=>e.uid===o.uid)),O=(0,a.fM)((()=>w()?.loaded??!1)),M=(0,a.fM)((()=>w()?.requestTime)),L=(0,a.fM)((()=>f.value&&(!p.value&&_().length>1||p.value&&_().length>y.value))),U=(0,a.fM)((()=>{const e=T();return e&&k.value[e.id]&&k.value[e.id].name?k.value[e.id].name:e?.name??""})),Q=(0,a.fM)((()=>o.uid)),_=()=>{const e=w();return e?e.items:[]},j=(0,a.fM)((()=>_()[g.value])),q=(0,a.fM)((()=>{if(c.value.hasHilighter()){const e=T();if(e)return e.mapLayer&&e.supportsFeatures}return!1})),$=e=>{v.value=e,u.hilightToggle=e,C()},E=()=>{const e=T();g.value=g.value??0,v.value=u.hilightToggle??v.value,p.value=!1,f.value=!!e,C()},I=e=>{p.value?(g.value+=e*y.value,C()):g.value+=e},C=()=>{const e=_();if(v.value&&O.value&&e.length>0&&q.value)if(p.value)c.value.hilightDetailsItems(e.slice(g.value,x.value),o.uid);else{const l=e[g.value];l&&c.value.hilightDetailsItems([l],o.uid)}else c.value.removeDetailsHilight()},S=()=>{p.value=!0,g.value=Math.floor(g.value/y.value)*y.value,C()},D=()=>{c.value.removeDetailsHilight()},H=()=>{c.value.removeDetailsHilight()},z=e=>{const l=g.value;g.value=e,p.value=!1,l===e&&C()};return(0,a.g4)((()=>{m.value.push(s.event.on(a.g9.LAYER_REMOVE,(e=>{const l=s.panel.get("details");o.uid===e.uid&&l&&l.close()}))),m.value.push(s.event.on(a.g9.PANEL_CLOSED,(e=>{"details"===e.id&&D()}))),m.value.push(s.event.on(a.g9.PANEL_MINIMIZED,(e=>{"details"===e.id&&H()}))),m.value.push(s.event.on(a.g9.MAP_BASEMAPCHANGE,(e=>{v.value&&e.schemaChanged&&C()}))),l.value?.addEventListener("blur",t),l.value?.addEventListener("keyup",n)})),(0,a.g2)((()=>{h.value.push((0,a.g3)(j,(()=>{p.value||(E(),void 0===j.value&&c.value.removeDetailsHilight())}),{deep:!1,immediate:!0})),h.value.push((0,a.g3)(Q,(()=>{const e=o.uid;if(p.value&&e){const l=w();l&&l.loading.then((()=>{o.uid===e&&p.value&&C()}))}}),{deep:!1,immediate:!0})),h.value.push((0,a.g3)(M,(()=>{g.value=0}))),h.value.push((0,a.g3)((()=>o.uid),(()=>{g.value=0})))})),(0,a.g5)((()=>{h.value.forEach((e=>e())),m.value.forEach((e=>s.event.off(e))),l.value?.removeEventListener("blur",t),l.value?.removeEventListener("keyup",n)})),(t,n)=>{const s=(0,a.fO)("truncate"),u=(0,a.fO)("tippy"),r=(0,a.fO)("focus-item"),o=(0,a.fO)("focus-list");return O.value&&0===b.value?((0,a.fQ)(),(0,a.fU)("div",{key:0,class:"detailsContent relative flex flex-col flex-grow pl-5",style:(0,a.kq)(e.results.length>1?{"margin-left":"42px"}:"")},[f.value?(0,a.fP)(((0,a.fQ)(),(0,a.fU)("h1",N,[(0,a.g6)((0,a.fX)(U.value),1)])),[[s,{options:{placement:"top-start"}}]]):(0,a.g7)("",!0),q.value?((0,a.fQ)(),(0,a.fU)("div",B,[(0,a.fT)("label",A,(0,a.fX)((0,a.fY)(d)("details.togglehilight.title")),1),(0,a.h4)(i.T,{config:{value:v.value,disabled:!1},onToggled:$},null,8,["config"])])):(0,a.g7)("",!0),L.value?((0,a.fQ)(),(0,a.fU)("div",X,[(0,a.fT)("div",F,[p.value?(0,a.g7)("",!0):((0,a.fQ)(),(0,a.fU)("button",{key:0,type:"button",class:"px-8 font-bold hover:bg-gray-200 focus:bg-gray-200","aria-label":(0,a.fY)(d)("details.item.see.list"),onClick:n[0]||(n[0]=e=>S())},(0,a.fX)((0,a.fY)(d)("details.item.see.list")),9,W)),(0,a.fT)("div",{class:(0,a.fW)(["flex ml-auto bg-gray-200 py-8 items-center",{"w-full":p.value}])},[(0,a.fP)(((0,a.fQ)(),(0,a.fU)("button",{type:"button",content:(0,a.fY)(d)(p.value?"details.items.previous":"details.item.previous.item"),onClick:n[1]||(n[1]=e=>I(-1)),class:"mx-2 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":(0,a.fY)(d)(p.value?"details.items.previous":"details.item.previous.item"),disabled:0===g.value},n[3]||(n[3]=[(0,a.fT)("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[(0,a.fT)("g",null,[(0,a.fT)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1)]),8,G)),[[u,{placement:"top"}]]),(0,a.fT)("span",R,(0,a.fX)(p.value?(0,a.fY)(d)("details.items.range",[g.value+1,Math.min(x.value,_().length),_().length]):(0,a.fY)(d)("details.item.count",[g.value+1,_().length])),1),(0,a.fP)(((0,a.fQ)(),(0,a.fU)("button",{type:"button",content:(0,a.fY)(d)(p.value?"details.items.next":"details.item.next.item"),onClick:n[2]||(n[2]=e=>I(1)),class:"mx-2 rotate-180 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":(0,a.fY)(d)(p.value?"details.items.next":"details.item.next.item"),disabled:!p.value&&g.value===_().length-1||p.value&&x.value>=_().length},n[4]||(n[4]=[(0,a.fT)("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[(0,a.fT)("g",null,[(0,a.fT)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1)]),8,J)),[[u,{placement:"top"}]])],2)])])):(0,a.g7)("",!0),f.value?((0,a.fQ)(),(0,a.fU)("div",Z,[_().length>0?((0,a.fQ)(),(0,a.fU)("div",K,[p.value?(0,a.fP)(((0,a.fQ)(),(0,a.fU)("div",{key:0,class:"flex flex-col",content:(0,a.fY)(d)("details.layers.results.list.tooltip"),ref_key:"el",ref:l},[((0,a.fQ)(!0),(0,a.fU)(a.fZ,null,(0,a.fV)(_().slice(g.value,x.value),((l,t)=>(0,a.fP)(((0,a.fQ)(),(0,a.fU)("button",{class:"flex flex-grow truncate default-focus-style hover:bg-gray-200",key:t,onClick:e=>z(g.value+t)},[(0,a.h4)(V,{data:l,uid:e.uid,open:!1,"in-list":!0},null,8,["data","uid"])],8,le)),[[r,"show-truncate"]]))),128))],8,ee)),[[o],[u,{trigger:"manual",placement:"top-start",touch:!1}]]):((0,a.fQ)(),(0,a.fR)(V,{key:1,data:j.value,uid:e.uid,open:!0,"in-list":!1},null,8,["data","uid"]))])):((0,a.fQ)(),(0,a.fU)("div",te,(0,a.fX)((0,a.fY)(d)("details.layers.results.empty.currentLayer")),1))])):((0,a.fQ)(),(0,a.fU)("div",ae,(0,a.fX)((0,a.fY)(d)("details.item.no.data")),1))],4)):((0,a.fQ)(),(0,a.fU)("div",{key:1,class:(0,a.fW)(["flex justify-center py-10 items-center",e.results.length>1?"ml-42":""])},[n[5]||(n[5]=(0,a.fT)("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1)),(0,a.g6)(" "+(0,a.fX)((0,a.fY)(d)("details.item.loading")),1)],2))}}}),ne=(0,a.jO)(ie,[["__scopeId","data-v-3a47d6ad"]]),se={class:"relative h-full"},ue={class:"detailsContentSection overflow-y-auto h-full"},re=(0,a.fI)({__name:"details-screen",props:{panel:{type:Object}},setup(e){const{t:l}=(0,a.fJ)(),t=(0,a.f_)("iApi"),i=(0,a.jV)(),n=(0,a.f$)([]),s=(0,a.f$)([]),u=(0,a.f$)([]),r=(0,a.f$)(!1),o=(0,a.f$)(""),d=(0,a.fM)((()=>i.activeGreedy)),f=(0,a.fM)((()=>i.payload)),c=(0,a.fM)((()=>i.properties)),v=e=>{o.value=e},p=e=>u.value.find((l=>l.uid===e)),g=e=>{void 0!==e&&(i.activeGreedy=0===e.length?0:e[0].requestTime,u.value=e,y(e))},y=e=>{if(o.value){const l=p(o.value);l?l.loading.then((()=>{l.requestTime===d.value&&(l.items.length>0?(i.activeGreedy=0,r.value=!1):m(e))})):m(e)}else m(e)},m=(e,l)=>{let t;if(l)t=l;else{const l=i.properties,a=e.map((e=>[l[e.layerId]?.priority??50,e.layerId])),n=new Set(a.map((e=>e[0])));t=[],n.forEach((e=>{const l=a.filter((l=>l[0]===e)).map((e=>e[1]));t.push([e,l])})),t.sort(((e,l)=>l[0]-e[0]))}if(0===t.length)return i.activeGreedy=0,void(r.value=!0);const a=t[t.length-1][1],n=e.filter((e=>a.includes(e.layerId))).map((e=>e.loading.then((()=>e.items.length>0?Promise.resolve(e):Promise.reject())))),s=0===e.length?0:e[0].requestTime;Promise.any(n).then((e=>{e.requestTime===d.value&&(i.activeGreedy=0,o.value=e.uid,r.value=!1)})).catch((()=>{s===d.value&&(t.pop(),m(e,t))}))};return(0,a.g2)((()=>{s.value.push((0,a.g3)(f,(e=>{g(e)}),{deep:!1,immediate:!0}))})),(0,a.g5)((()=>{n.value.forEach((e=>t.event.off(e))),s.value.forEach((e=>e()))})),(t,n)=>{const s=(0,a.fN)("panel-screen");return(0,a.fQ)(),(0,a.fR)(s,{panel:e.panel},{header:(0,a.fS)((()=>[(0,a.g6)((0,a.fX)("toggleEvent"===(0,a.fY)(i).origin?(0,a.fY)(l)("details.layers.title.gridOrigin"):(0,a.fY)(l)("details.layers.title.identifyOrigin")),1)])),content:(0,a.fS)((()=>[(0,a.fT)("div",se,[u.value.length>1?((0,a.fQ)(),(0,a.fR)(T,{key:0,results:u.value,detailsProperties:c.value,selected:o.value,onSelectionChanged:v},null,8,["results","detailsProperties","selected"])):(0,a.g7)("",!0),(0,a.fT)("div",ue,[r.value?((0,a.fQ)(),(0,a.fU)("div",{key:1,class:(0,a.fW)(["text-center",{"ml-42":u.value.length>1}])},(0,a.fX)(u.value.length>=1?(0,a.fY)(l)("details.layers.results.empty"):(0,a.fY)(l)("details.layers.results.empty.noLayers")),3)):((0,a.fQ)(),(0,a.fR)(ne,{key:0,uid:o.value,results:u.value},null,8,["uid","results"]))])])])),_:1},8,["panel"])}}}),oe=(0,a.jO)(re,[["__scopeId","data-v-2a8a1e06"]])},53906:function(e,l,t){t.d(l,{T:function(){return v}});var a=t(44444),i={name:"Toggle",emits:["input","update:modelValue","change"],props:{value:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},modelValue:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},id:{type:[String,Number],required:!1,default:"toggle"},name:{type:[String,Number],required:!1,default:"toggle"},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},falseValue:{type:[String,Number,Boolean],required:!1,default:!1},trueValue:{type:[String,Number,Boolean],required:!1,default:!0},onLabel:{type:[String,Object],required:!1,default:""},offLabel:{type:[String,Object],required:!1,default:""},classes:{type:Object,required:!1,default:()=>({})},labelledby:{type:String,required:!1},describedby:{type:String,required:!1},aria:{required:!1,type:Object,default:()=>({})}},setup(e,l){const t=function(e,l){const{value:t,modelValue:i,falseValue:n,trueValue:s,disabled:u}=(0,a.kx)(e),r=i&&void 0!==i.value?i:t,o=(0,a.fM)((()=>r.value===s.value)),d=e=>{l.emit("input",e),l.emit("update:modelValue",e),l.emit("change",e)},f=()=>{d(s.value)},c=()=>{d(n.value)};return-1!==[null,void 0,!1,0,"0","off"].indexOf(r.value)&&-1===[n.value,s.value].indexOf(r.value)&&c(),-1!==[!0,1,"1","on"].indexOf(r.value)&&-1===[n.value,s.value].indexOf(r.value)&&f(),{externalValue:r,checked:o,update:d,check:f,uncheck:c,handleInput:e=>{d(e.target.checked?s.value:n.value)},handleClick:()=>{u.value||(o.value?c():f())}}}(e,l),i=function(e,l,t){const{trueValue:i,falseValue:n,onLabel:s,offLabel:u}=(0,a.kx)(e),r=t.checked,o=t.update;return{label:(0,a.fM)((()=>{let e=r.value?s.value:u.value;return e||(e="&nbsp;"),e})),toggle:()=>{o(r.value?n.value:i.value)},on:()=>{o(i.value)},off:()=>{o(n.value)}}}(e,0,{checked:t.checked,update:t.update}),n=function(e,l,t){const i=(0,a.kx)(e),n=i.disabled,s=t.checked,u=(0,a.fM)((()=>({container:"toggle-container",toggle:"toggle",toggleOn:"toggle-on",toggleOff:"toggle-off",toggleOnDisabled:"toggle-on-disabled",toggleOffDisabled:"toggle-off-disabled",handle:"toggle-handle",handleOn:"toggle-handle-on",handleOff:"toggle-handle-off",handleOnDisabled:"toggle-handle-on-disabled",handleOffDisabled:"toggle-handle-off-disabled",label:"toggle-label",...i.classes.value})));return{classList:(0,a.fM)((()=>({container:u.value.container,toggle:[u.value.toggle,n.value?s.value?u.value.toggleOnDisabled:u.value.toggleOffDisabled:s.value?u.value.toggleOn:u.value.toggleOff],handle:[u.value.handle,n.value?s.value?u.value.handleOnDisabled:u.value.handleOffDisabled:s.value?u.value.handleOn:u.value.handleOff],label:u.value.label})))}}(e,0,{checked:t.checked}),s=function(e,l,t){const{disabled:i}=(0,a.kx)(e),n=t.check,s=t.uncheck,u=t.checked;return{handleSpace:()=>{i.value||(u.value?s():n())}}}(e,0,{check:t.check,uncheck:t.uncheck,checked:t.checked});return{...t,...n,...i,...s}}};const n=["tabindex","aria-checked","aria-describedby","aria-labelledby"],s=["id","name","value","checked","disabled"],u=["innerHTML"],r=["checked"];i.render=function(e,l,t,i,o,d){return(0,a.fQ)(),(0,a.fU)("div",(0,a.kz)({class:e.classList.container,tabindex:t.disabled?void 0:0,"aria-checked":e.checked,"aria-describedby":t.describedby,"aria-labelledby":t.labelledby,role:"switch"},t.aria,{onKeypress:l[1]||(l[1]=(0,a.kc)((0,a.kb)(((...l)=>e.handleSpace&&e.handleSpace(...l)),["prevent"]),["space"]))}),[(0,a.fP)((0,a.fT)("input",{type:"checkbox",id:t.id,name:t.name,value:t.trueValue,checked:e.checked,disabled:t.disabled},null,8,s),[[a.jN,!1]]),(0,a.fT)("div",{class:(0,a.fW)(e.classList.toggle),onClick:l[0]||(l[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[(0,a.fT)("span",{class:(0,a.fW)(e.classList.handle)},null,2),(0,a.ky)(e.$slots,"label",{checked:e.checked,classList:e.classList},(()=>[(0,a.fT)("span",{class:(0,a.fW)(e.classList.label),innerHTML:e.label},null,10,u)])),t.required?((0,a.fQ)(),(0,a.fU)("input",{key:0,type:"checkbox",style:{appearance:"none",height:"1px",margin:"0",padding:"0",fontSize:"0",background:"transparent",position:"absolute",width:"100%",bottom:"0",outline:"none"},checked:e.checked,"aria-hidden":"true",tabindex:"-1",required:""},null,8,r)):(0,a.g7)("v-if",!0)],2)],16,n)},i.__file="src/Toggle.vue";const o={class:"flex flex-row rv-label"},d={class:"flex items-center"},f=["innerHTML"],c=(0,a.fI)({__name:"toggle-switch-control",props:{config:{type:Object,required:!0},name:String,icon:String,ariaLabel:String},emits:["toggled"],setup(e,{emit:l}){const t=l,n=e,s=(0,a.f$)(n.config.value),u=(0,a.f$)(!!n.config.disabled),r=(0,a.f$)(0),c=(0,a.km)([]),v=(0,a.f$)(null);c.push((0,a.g3)((0,a.kA)(n,"config"),((e,l)=>{s.value=e.value,u.value=!!e.disabled,r.value+=u.value!==l.disabled?1:0}),{deep:!0}),(0,a.g3)(v,(e=>{e&&g()})));const p=()=>{u.value||(s.value=!s.value,t("toggled",s.value))},g=()=>{if(v.value){const e=v.value.querySelector('input[type="checkbox"]');e&&n.ariaLabel&&e.setAttribute("aria-label",n.ariaLabel)}};return(0,a.g5)((()=>{c.forEach((e=>e()))})),(l,n)=>((0,a.fQ)(),(0,a.fU)("div",o,[(0,a.fT)("div",d,[(0,a.fT)("div",{innerHTML:e.icon,class:"p-8 pl-0"},null,8,f),(0,a.g6)(" "+(0,a.fX)(e.name),1)]),n[2]||(n[2]=(0,a.fT)("div",{class:"flex-1"},null,-1)),(0,a.fT)("div",{ref_key:"toggleWrapper",ref:v},[((0,a.fQ)(),(0,a.fR)((0,a.fY)(i),{onChange:n[0]||(n[0]=e=>t("toggled",e)),onKeyupCapture:[(0,a.kc)((0,a.kb)(p,["stop"]),["enter"]),(0,a.kc)((0,a.kb)(p,["stop"]),["space"])],disabled:u.value,key:r.value,modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),classes:{container:"inline-block rounded-full outline-none focus:ring focus:ring-blue-500 focus:ring-opacity-30",toggle:"flex w-40 h-15 rounded-full relative cursor-pointer transition items-center box-content border-2 text-xs leading-none",toggleOn:"bg-blue-500 border-blue-500 justify-start text-white",toggleOff:"bg-gray-200 border-gray-200 justify-end text-gray-700",toggleOnDisabled:"bg-gray-300 border-gray-300 justify-start text-gray-400 cursor-not-allowed",toggleOffDisabled:"bg-gray-200 border-gray-200 justify-end text-gray-400 cursor-not-allowed",handle:"inline-block bg-white w-15 h-15 top-0 rounded-full absolute transition-all",handleOn:"left-full transform -translate-x-full",handleOff:"left-0",handleOnDisabled:"bg-gray-100 left-full transform -translate-x-full",handleOffDisabled:"bg-gray-100 left-0",label:"text-center w-8 border-box whitespace-nowrap select-none"}},null,8,["onKeyupCapture","disabled","modelValue"]))],512)]))}}),v=(0,a.jO)(c,[["__scopeId","data-v-188debd2"]])}}]);
//# sourceMappingURL=500.b2162958.js.map