"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[2376],{32376:function(t,e,n){n.r(e),n.d(e,{executeForTopCount:function(){return u}});var r=n(44444),o=n(57645);async function u(t,e,n){const u=(0,r.bq)(t);return(await(0,o.c)(u,r.bQ.from(e),{...n})).data.count}},57645:function(t,e,n){n.d(e,{c:function(){return c},d:function(){return l},m:function(){return s},p:function(){return i}});var r=n(44444);const o="Layer does not support extent calculation.";function u(t,e){const n=t.geometry,o=t.toJSON(),u=o;if(null!=n&&(u.geometry=JSON.stringify(n),u.geometryType=(0,r.bS)(n),u.inSR=(0,r.bT)(n.spatialReference)),o.topFilter?.groupByFields&&(u.topFilter.groupByFields=o.topFilter.groupByFields.join(",")),o.topFilter?.orderByFields&&(u.topFilter.orderByFields=o.topFilter.orderByFields.join(",")),o.topFilter&&(u.topFilter=JSON.stringify(u.topFilter)),o.objectIds&&(u.objectIds=o.objectIds.join(",")),o.orderByFields&&(u.orderByFields=o.orderByFields.join(",")),o.outFields&&!(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?o.outFields.includes("*")?u.outFields="*":u.outFields=o.outFields.join(","):delete u.outFields,o.outSR?u.outSR=(0,r.bT)(o.outSR):n&&o.returnGeometry&&(u.outSR=u.inSR),o.returnGeometry&&delete o.returnGeometry,o.timeExtent){const t=o.timeExtent,{start:e,end:n}=t;null==e&&null==n||(u.time=e===n?e:`${e??"null"},${n??"null"}`),delete o.timeExtent}return u}async function i(t,e,n,o){const u=await y(t,e,"json",o);return(0,r.bR)(e,n,u.data),u}async function s(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{objectIds:[]}}:y(t,e,"json",n,{returnIdsOnly:!0})}async function l(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{count:0,extent:null}}:y(t,e,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(o);if(e.hasOwnProperty("count"))throw new Error(o);return t}))}function c(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):y(t,e,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function y(t,e,n,o={},i={}){const s="string"==typeof t?(0,r.I)(t):t,l=e.geometry?[e.geometry]:[];return o.responseType="json",(0,r.a0)(l,null,o).then((t=>{const l=t?.[0];null!=l&&((e=e.clone()).geometry=l);const c=(0,r.bP)({...s.query,f:n,...i,...u(e,i)});return(0,r.U)((0,r.aw)(s.path,"queryTopFeatures"),{...o,query:{...c,...o.query}})}))}}}]);
//# sourceMappingURL=2376.b77ad229.js.map