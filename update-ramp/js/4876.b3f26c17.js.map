{"version":3,"file":"js/4876.b3f26c17.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/index-25Z1fbt7.js"],"sourcesContent":["import{m6 as O,kj as I,m7 as c,hT as E,m8 as P,ko as k,m9 as R,kl as x,ma as T,F as z,fI as F,fJ as D,f_ as H,f$ as f,fM as d,km as L,g4 as N,g9 as m,g1 as j,g5 as W,fO as q,fU as y,fT as v,fW as Y,fP as J,fY as $,kq as G,fQ as g,jO as Q}from\"./main-DCIX61zy.js\";class U extends O{overviewGraphicLayer;overviewmapStore;constructor(e){super(e),this.overviewGraphicLayer=this.$iApi.geo.layer.createLayer({id:\"RampOverviewGraphic\",layerType:I.GRAPHIC,url:\"\",cosmetic:!0}),this.overviewmapStore=c(this.$vApp.$pinia)}createMapView(e){if(!e)throw new Error(\"Attempted to create overview map view without a basemap\");const t=typeof e==\"string\"?this.findBasemap(e):e;this.applyBasemap(t),this._rampExtentSet=this.$iApi.geo.map.getExtentSet().clone(),this._rampSR=this._rampExtentSet.sr.clone();const i=this.overviewmapStore.expandFactor;this.esriView=E(new P({map:this.esriMap,container:this._targetDiv,constraints:{rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this.$iApi.geo.map.getExtent().toESRI().expand(i)})),this.esriView.ui.components=[],this.handlers.push({type:\"mouse-wheel\",handler:this.esriView.on(\"mouse-wheel\",a=>{a.stopPropagation()})}),this.handlers.push({type:\"double-click\",handler:this.esriView.on(\"double-click\",a=>{a.stopPropagation()})}),this.handlers.push({type:\"key-down\",handler:this.esriView.on(\"key-down\",a=>{a.stopPropagation()})}),this.handlers.push({type:\"key-up\",handler:this.esriView.on(\"key-up\",a=>{a.stopPropagation()})}),this.handlers.push({type:\"drag\",handler:this.esriView.on(\"drag\",a=>{a.stopPropagation(),this.mapDrag(a)})}),this.esriView.container.addEventListener(\"touchmove\",a=>{a.preventDefault()}),this.esriView.watch(\"fatalError\",()=>{const a=new IntersectionObserver(h=>{h.forEach(p=>{p.isIntersecting&&(this.esriView?.tryFatalErrorRecovery(),a.disconnect())})});a.observe(this.esriView.container)}),this.esriView.when(()=>{this._viewPromise.resolveMe(),this.created=!0})}async addMapGraphicLayer(){if(!this.esriMap){this.noMapErr();return}const e=new k(this.$iApi.geo.map.getExtent(),\"overview-graphic\"),t=this.overviewmapStore.borderColour??\"#FF0000\",i=this.overviewmapStore.borderWidth??1,a=this.overviewmapStore.areaColour??\"#000000\",h=this.overviewmapStore.areaOpacity??.25,p=`${a}${Math.round(h*255).toString(16)}`;e.style=new R({fill:{colour:p},outline:{colour:t,width:i}}),await this.overviewGraphicLayer.initiate(),await this.overviewGraphicLayer.addGraphic(e),this.esriMap?.add(this.overviewGraphicLayer.esriLayer)}async removeMapGraphicLayer(){if(!this.esriMap){this.noMapErr();return}if(!this.overviewGraphicLayer.esriLayer)throw new Error(\"Attempted to remove layer from the map without an esri layer. Likely layer.initiate() was not called or had not finished.\");this.overviewGraphicLayer.removeGraphic(),this.esriMap.remove(this.overviewGraphicLayer.esriLayer),await this.overviewGraphicLayer.terminate()}destroyMapView(){this.esriView?.container.removeEventListener(\"touchmove\",e=>{e.preventDefault()}),super.destroyMapView()}findBasemap(e){const t=this._basemapStore.find(i=>i.id===e);if(t)return t;{const i=x(this.$vApp.$pinia).config.map;if(i){const a=i.basemaps.find(h=>h.id===e);if(a)return new T(a)}}throw new Error(`Invalid basemap id requested: ${e}`)}setBasemap(e){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const t=this.findBasemap(e),i=(this.getCurrentBasemapId()?this.findBasemap(this.getCurrentBasemapId()):void 0)?.tileSchemaId!==t.tileSchemaId;return i?(this.destroyMapView(),this.createMapView(t)):this.applyBasemap(t),i}startExtent=null;async mapDrag(e){if(e.native.pointerType===\"mouse\"){if(e.action===\"start\")await this.cursorHitTest(e)&&(this.startExtent=E(this.overviewGraphicLayer.getEsriGraphic(\"overview-graphic\").geometry));else if(this.startExtent){const t=this.esriView.toMap(e.origin),i=this.esriView.toMap({x:e.x,y:e.y}),a=this.startExtent.clone().offset(i.x-t.x,i.y-t.y,0);this.overviewGraphicLayer.getEsriGraphic(\"overview-graphic\").geometry=a,e.action===\"end\"&&(this.$iApi.geo.map.zoomMapTo(this.$iApi.geo.geom.geomEsriToRamp(a),void 0,!1),this.startExtent=null)}}}updateOverview(e){const t=this.overviewmapStore.expandFactor,i=this.zoomMapTo(e.expand(t),void 0,!1),a=this.overviewGraphicLayer.getLocalGraphic(\"overview-graphic\");return this.overviewGraphicLayer.removeGraphic(a),a.geometry=e,this.overviewGraphicLayer.addGraphic(a),i}async cursorHitTest(e){return(await this.esriView.hitTest(e)).results.length>0}}class X extends z{_parseConfig(e){const t=c(this.$vApp.$pinia);t.basemaps=e?.basemaps||{},t.mapConfig.basemaps=e?Object.values(e.basemaps):[],t.startMinimized=e?.startMinimized??!0,t.expandFactor=e?.expandFactor??1.5,t.borderColour=e?.borderColour??\"#FF0000\",t.borderWidth=e?.borderWidth??1,t.areaColour=e?.areaColour??\"#000000\",t.areaOpacity=e?.areaOpacity??.25}get config(){return super.config}}const Z={class:\"relative h-full w-full overflow-hidden\"},K={class:\"absolute h-30 w-30 top-0 right-0\"},ee=[\"content\",\"aria-label\"],ae=F({__name:\"overviewmap\",setup(w){const e=c(),{t}=D(),i=H(\"iApi\"),a=x(),h=f(),p=d(()=>a.activeBasemapConfig),A=d(()=>e.mapConfig),b=d(()=>e.basemaps),S=d(()=>e.startMinimized);let r=L(new U(i));const o=f(!0),M=f(!1),l=L([]);N(()=>{i.geo.map.viewPromise.then(async()=>{u(),r.createMap(A.value,h.value.querySelector(\".overviewmap\")),await r.viewPromise,await r.addMapGraphicLayer(),o.value=S.value;let n=r.updateOverview(i.geo.map.getExtent());l.push(i.event.on(m.MAP_EXTENTCHANGE,j(100,s=>{n.then(()=>{r.updateOverview(s)})}))),l.push(i.event.on(m.MAP_CREATED,()=>{u()})),l.push(i.event.on(m.MAP_REFRESH_END,()=>{u()})),l.push(i.event.on(m.MAP_BASEMAPCHANGE,async s=>{!s.schemaChanged&&r.created&&p.value&&b.value[p.value.tileSchemaId]===void 0&&(await r.removeMapGraphicLayer(),r.setBasemap(s.basemapId),await r.addMapGraphicLayer())}))})}),W(()=>{l.forEach(n=>i.event.off(n)),r.destroyMap()});const C=async n=>{M.value=!o.value&&await r.cursorHitTest(n)},V=()=>({height:`${o.value?48:200}px`,width:`${o.value?48:200}px`}),_=()=>({top:`${o.value?-6:-3}px`,right:`${o.value?-6:-3}px`,transform:`rotate(${o.value?225:45}deg)`}),u=()=>{if(!p.value){console.error(\"Overview Map could not obtain the basemap config used by the main map\");return}try{const n=p.value?.tileSchemaId;if(!n)throw new Error(\"Overview Map could not obtain the tile schema of the main map\");const s=b.value[n];if(!s)throw new Error(\"Overview Map could not find a suitable basemap that matches the tile schema of the main map\");r.created||e.updateInitialBasemap(s.id),r.created&&r.viewPromise.then(()=>r.setBasemap(s.id))}catch{r.created||e.updateInitialBasemap(p.value.id),r.viewPromise.then(()=>r.setBasemap(p.value.id))}};return(n,s)=>{const B=q(\"tippy\");return g(),y(\"div\",{class:\"relative\",ref_key:\"el\",ref:h},[v(\"div\",{style:G(V()),class:\"pointer-events-auto absolute top-0 right-0 mt-12 mr-12 shadow-tm border-4 border-solid border-white bg-white transition-all duration-300 ease-out\"},[v(\"div\",Z,[v(\"div\",{class:Y([\"overviewmap absolute top-0 right-0 h-192 w-192\",{\"cursor-move\":M.value}]),onMousemove:C},null,34)]),v(\"div\",K,[J((g(),y(\"button\",{type:\"button\",tabindex:\"0\",class:\"cursor-pointer absolute h-full w-full\",onClick:s[0]||(s[0]=se=>o.value=!o.value),content:$(t)(o.value?\"overviewmap.expand\":\"overviewmap.minimize\"),\"aria-label\":$(t)(o.value?\"overviewmap.expand\":\"overviewmap.minimize\")},[(g(),y(\"svg\",{class:\"absolute fill-current text-gray-500 transition-all duration-300 ease-out\",style:G(_()),xmlns:\"http://www.w3.org/2000/svg\",fit:\"\",height:\"100%\",width:\"100%\",preserveAspectRatio:\"xMidYMid meet\",viewBox:\"0 0 24 24\",focusable:\"false\"},s[1]||(s[1]=[v(\"g\",{id:\"apple-keyboard-control\"},[v(\"path\",{d:\"M 19.7782,11.7782L 18.364,13.1924L 12,6.82843L 5.63604,13.1924L 4.22183,11.7782L 12,4L 19.7782,11.7782 Z \"})],-1)]),4))],8,ee)),[[B,{placement:\"left\",hideOnClick:!1}]])])],4)],512)}}}),te=Q(ae,[[\"__scopeId\",\"data-v-461fd934\"]]),ie={en:{\"overviewmap.expand\":\"Expand Overview\",\"overviewmap.minimize\":\"Minimize Overview\"},fr:{\"overviewmap.expand\":\"D\\xE9velopper l'aper\\xE7u\",\"overviewmap.minimize\":\"R\\xE9duire l'aper\\xE7u\"}};class re extends X{added(){Object.entries(ie).forEach(a=>this.$iApi.$i18n.mergeLocaleMessage(...a)),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,a=>this._parseConfig(a)),{destroy:t,el:i}=this.mount(te,{app:this.$element});this.$vApp.$el.getElementsByClassName(\"inner-shell\")[0].appendChild(i.childNodes[0]),this.removed=()=>{e(),t(),c(this.$vApp.$pinia).$reset()}}}export{re as default};\n"],"names":["U","overviewGraphicLayer","overviewmapStore","constructor","e","super","this","$iApi","geo","layer","createLayer","id","layerType","GRAPHIC","url","cosmetic","$vApp","$pinia","createMapView","Error","t","findBasemap","applyBasemap","_rampExtentSet","map","getExtentSet","clone","_rampSR","sr","i","expandFactor","esriView","esriMap","container","_targetDiv","constraints","rotationEnabled","spatialReference","toESRI","extent","getExtent","expand","ui","components","handlers","push","type","handler","on","a","stopPropagation","mapDrag","addEventListener","preventDefault","watch","IntersectionObserver","h","forEach","p","isIntersecting","tryFatalErrorRecovery","disconnect","observe","when","_viewPromise","resolveMe","created","addMapGraphicLayer","noMapErr","borderColour","borderWidth","areaColour","areaOpacity","Math","round","toString","style","fill","colour","outline","width","initiate","addGraphic","add","esriLayer","removeMapGraphicLayer","removeGraphic","remove","terminate","destroyMapView","removeEventListener","_basemapStore","find","config","basemaps","setBasemap","getCurrentBasemapId","tileSchemaId","startExtent","native","pointerType","action","cursorHitTest","getEsriGraphic","geometry","toMap","origin","x","y","offset","zoomMapTo","geom","geomEsriToRamp","updateOverview","getLocalGraphic","hitTest","results","length","X","_parseConfig","mapConfig","Object","values","startMinimized","Z","class","K","ee","ae","__name","setup","w","activeBasemapConfig","A","b","S","r","o","M","l","viewPromise","then","async","u","createMap","value","querySelector","n","event","MAP_EXTENTCHANGE","s","MAP_CREATED","MAP_REFRESH_END","MAP_BASEMAPCHANGE","schemaChanged","basemapId","off","destroyMap","C","V","height","_","top","right","transform","updateInitialBasemap","console","error","B","ref_key","ref","onMousemove","tabindex","onClick","se","content","xmlns","fit","preserveAspectRatio","viewBox","focusable","d","placement","hideOnClick","te","ie","en","fr","re","added","entries","$i18n","mergeLocaleMessage","$watch","destroy","el","mount","app","$element","$el","getElementsByClassName","appendChild","childNodes","removed","$reset"],"sourceRoot":""}