{"version":3,"file":"js/9394.8b9c3378.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/GroupLayer-D5055l0x.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/saveUtils-BQy3eBhU.js"],"sourcesContent":["import{ea as u,ee as c,ec as v,ed as m,hz as f,hA as w,ef as g,cL as L,hB as _,f8 as I,cc as h,eM as O,hC as S,S as A,B as M,hD as V,hE as d,hF as E,bt as r,bu as l,eO as p,eg as P,hG as C,c9 as x,eL as b,bv as G,ep as T,G as F}from\"./main-DCIX61zy.js\";import{a as H}from\"./fetchService-DhIYtzwD.js\";import{r as j}from\"./saveUtils-BQy3eBhU.js\";const R=Symbol(\"WebScene\");let s=class extends u(c(v(m(f(w(g(T))))))){constructor(e){super(e),this.allLayers=new L({getCollections:()=>[this.layers],getChildrenFunction:i=>\"layers\"in i?i.layers:null}),this.allTables=_(this),this.fullExtent=void 0,this.operationalLayerType=\"GroupLayer\",this.spatialReference=void 0,this.type=\"group\",this._debouncedSaveOperations=I(async(i,t,a)=>{const{save:o,saveAs:n}=await import(\"./groupLayerUtils-Da5v5tY3.js\");switch(i){case d.SAVE:return o(this,t);case d.SAVE_AS:return n(this,a,t)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([h(()=>{let e=this.parent;for(;e&&\"parent\"in e&&e.parent;)e=e.parent;return e&&R in e},e=>{const i=\"prevent-adding-tables\";this.removeHandles(i),e&&(this.tables.removeAll(),this.addHandles(x(()=>this.tables,\"before-add\",t=>{t.preventDefault(),F.getLogger(this).errorOnce(\"tables\",\"tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.\")}),i))},C),h(()=>this.visible,this._onVisibilityChange.bind(this),b)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf(\"portalItem\")===O.USER}_writeLayers(e,i,t,a){const o=[];if(!e)return o;e.forEach(n=>{const y=S(n,a.webmap?a.webmap.getLayerJSONFromResourceInfo(n):null,a);y?.layerType&&o.push(y)}),i.layers=o}set portalItem(e){this._set(\"portalItem\",e)}readPortalItem(e,i,t){const{itemId:a,layerType:o}=i;if(o===\"GroupLayer\"&&a)return new A({id:a,portal:t?.portal})}writePortalItem(e,i){e?.id&&(i.itemId=e.id)}set visibilityMode(e){const i=this._get(\"visibilityMode\")!==e;this._set(\"visibilityMode\",e),i&&this._enforceVisibility(e,this.visible)}async beforeSave(){return j(this)}load(e){const i=this.loadFromPortal({supportedTypes:[\"Feature Service\",\"Feature Collection\",\"Group Layer\",\"Scene Service\"],layerModuleTypeMap:H},e).catch(t=>{if(M(t),this.sourceIsPortalItem)throw t});return this.addResolvingPromise(i),Promise.resolve(this)}async loadAll(){return V(this,e=>{e(this.layers,this.tables)})}async save(e){return this._debouncedSaveOperations(d.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(d.SAVE_AS,i,e)}layerAdded(e){e.visible&&this.visibilityMode===\"exclusive\"?this._turnOffOtherLayers(e):this.visibilityMode===\"inherited\"&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer read to Grouplayer: uid=${e.uid}`):this.addHandles(h(()=>e.visible,i=>this._onChildVisibilityChange(e,i),b),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach(i=>{i!==e&&(i.visible=!1)})}_enforceVisibility(e,i){if(!E(this).initialized)return;const t=this.layers;let a=t.find(o=>o.visible);switch(e){case\"exclusive\":t.length&&!a&&(a=t.at(0),a.visible=!0),this._turnOffOtherLayers(a);break;case\"inherited\":t.forEach(o=>{o.visible=i})}}_onVisibilityChange(e){this.visibilityMode===\"inherited\"&&this.layers.forEach(i=>{i.visible=e})}_onChildVisibilityChange(e,i){switch(this.visibilityMode){case\"exclusive\":i?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case\"inherited\":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(e=>e.visible)}};r([l({readOnly:!0,dependsOn:[]})],s.prototype,\"allLayers\",void 0),r([l({readOnly:!0})],s.prototype,\"allTables\",void 0),r([l({json:{read:!0,write:!0}})],s.prototype,\"blendMode\",void 0),r([l()],s.prototype,\"fullExtent\",void 0),r([l({readOnly:!0})],s.prototype,\"sourceIsPortalItem\",null),r([l({json:{read:!1,write:{ignoreOrigin:!0}}})],s.prototype,\"layers\",void 0),r([p(\"layers\")],s.prototype,\"_writeLayers\",null),r([l({type:[\"GroupLayer\"]})],s.prototype,\"operationalLayerType\",void 0),r([l({json:{origins:{\"web-map\":{read:!1,write:{overridePolicy(e,i,t){return{enabled:e?.type===\"Group Layer\"&&t?.initiator!==this}}}},\"web-scene\":{read:!1,write:!1}}}})],s.prototype,\"portalItem\",null),r([P(\"web-map\",\"portalItem\",[\"itemId\"])],s.prototype,\"readPortalItem\",null),r([p(\"web-map\",\"portalItem\",{itemId:{type:String}})],s.prototype,\"writePortalItem\",null),r([l()],s.prototype,\"spatialReference\",void 0),r([l({json:{read:!1},readOnly:!0,value:\"group\"})],s.prototype,\"type\",void 0),r([l({type:[\"independent\",\"inherited\",\"exclusive\"],value:\"independent\",json:{write:!0,origins:{\"web-map\":{type:[\"independent\",\"exclusive\"],write:(e,i,t)=>{e!==\"inherited\"&&(i[t]=e)}}}}})],s.prototype,\"visibilityMode\",null),s=r([G(\"esri.layers.GroupLayer\")],s);const z=s;export{z as default};\n","import{s as l}from\"./main-DCIX61zy.js\";async function i(t){const s=[];for(const o of t.allLayers)if(\"beforeSave\"in o&&typeof o.beforeSave==\"function\"){const e=o.beforeSave();e&&s.push(e)}await Promise.allSettled(s)}const u=new Set([\"layer:unsupported\",\"property:unsupported\",\"symbol:unsupported\",\"symbol-layer:unsupported\",\"url:unsupported\"]);function d(t,s,o){let e=(t.messages??[]).filter(({type:r})=>r===\"error\").map(({name:r,message:a,details:p})=>new l(r,a,p));if(t.blockedRelativeUrls&&(e=e.concat(t.blockedRelativeUrls.map(r=>new l(\"url:unsupported\",`Relative url '${r}' is not supported`)))),o){const{ignoreUnsupported:r,supplementalUnsupportedErrors:a=[],requiredPropertyChecksDisabled:p}=o;r&&(e=e.filter(({name:n})=>!(u.has(n)||a.includes(n)))),p&&(e=e.filter(n=>n.name!==\"web-document-write:property-required\"))}if(e.length>0)throw new l(s.errorName,\"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:e})}export{i as r,d as t};\n"],"names":["R","Symbol","s","constructor","e","super","this","allLayers","getCollections","layers","getChildrenFunction","i","allTables","fullExtent","operationalLayerType","spatialReference","type","_debouncedSaveOperations","async","t","a","save","o","saveAs","n","SAVE","SAVE_AS","initialize","_enforceVisibility","visibilityMode","visible","addHandles","parent","removeHandles","tables","removeAll","preventDefault","getLogger","errorOnce","_onVisibilityChange","bind","destroy","sourceIsPortalItem","portalItem","originIdOf","USER","_writeLayers","forEach","y","webmap","getLayerJSONFromResourceInfo","layerType","push","_set","readPortalItem","itemId","id","portal","writePortalItem","_get","beforeSave","load","loadFromPortal","supportedTypes","layerModuleTypeMap","catch","addResolvingPromise","Promise","resolve","loadAll","layerAdded","_turnOffOtherLayers","hasHandles","uid","console","error","_onChildVisibilityChange","layerRemoved","initialized","find","length","at","_isAnyLayerVisible","some","readOnly","dependsOn","prototype","json","read","write","ignoreOrigin","origins","overridePolicy","enabled","initiator","String","value","z","allSettled","u","Set","d","messages","filter","r","map","name","message","details","p","blockedRelativeUrls","concat","ignoreUnsupported","supplementalUnsupportedErrors","requiredPropertyChecksDisabled","has","includes","errorName","errors"],"sourceRoot":""}