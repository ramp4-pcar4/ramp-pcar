"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[7350],{17350:function(e,t,a){a.r(t),a.d(t,{POLE_MARKER_LAYER_ID:function(){return u},default:function(){return v}});var i=a(44444);class n extends i.F{_parseConfig(e){const t=(0,i.kk)(this.$vApp.$pinia);e&&(t.arrowIcon=e.arrowIcon,t.poleIcon=e.poleIcon)}get config(){return super.config}}const r="path",o=12,s="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z",l="#ff0000ff",h=5,p=6,f={style:r,size:o,path:s,colour:l,xOffset:h,yOffset:p},c=["innerHTML"],d=(0,i.fI)({__name:"northarrow",setup(e){const t=(0,i.kl)(),a=(0,i.kk)(),n=(0,i.f_)("iApi"),r=(0,i.f$)(),o=(0,i.fM)((()=>a.arrowIcon)),s=(0,i.fM)((()=>a.poleIcon)),l=(0,i.f$)(0),h=(0,i.f$)(0),p=(0,i.f$)(!1),d=(0,i.f$)('<svg xmlns="http://www.w3.org/2000/svg" fit=""  width="25" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" focusable="false">\n                <g id="northarrow" transform="translate(-285.24 -142.234)">\n                    <path id="path3770-7" d="M305.91 156.648a8.652 8.652 0 0 1-8.654 8.653 8.652 8.652 0 0 1-8.653-8.653 8.653 8.653 0 0 1 8.653-8.653 8.653 8.653 0 0 1 8.653 8.653z" fill="#fff" stroke="#fff" stroke-width=".895"/>\n                    <path id="path3770" d="M304.982 156.648a7.725 7.725 0 0 1-7.726 7.726 7.725 7.725 0 0 1-7.726-7.726 7.725 7.725 0 0 1 7.726-7.726 7.725 7.725 0 0 1 7.726 7.726z" fill="none" stroke="#6d6d6d" stroke-width=".799"/>\n                    <path id="path3774" d="M297.256 156.648v-8.525" fill="none" stroke="#000" stroke-width=".067"/>\n                    <path d="M297.258 143.48l8.793 22.432-8.811-8.812-8.812 8.812z" id="path3778" fill="#fff" stroke="#fff" stroke-width=".912"/>\n                    <path d="M297.256 144.805l7.726 19.568-7.726-7.726-7.726 7.726z" id="path3780" fill="#d6d6d6" stroke="#000" stroke-width=".266" stroke-linecap="square"/>\n                    <path id="path6038" d="M297.256 144.666l-7.726 19.568 7.726-7.726" fill="#6d6d6d" stroke-width=".296" stroke-linecap="square"/>\n                </g>\n            </svg>'),v=(0,i.f$)(!1),g=(0,i.km)([]),k=(0,i.f$)([]);let m;(0,i.g4)((()=>{const e=t.config.map;k.value=e.tileSchemas,o?.value&&(d.value=`<img width='25' src='${o.value}'>`),n.geo.map.esriView?.ready&&w(n.geo.map.getExtent()),g.push(n.event.on(i.g9.MAP_EXTENTCHANGE,(0,i.g1)(300,w)))})),(0,i.g5)((()=>{g.forEach((e=>n.event.off(e)))}));const w=async e=>{let a;m=t.activeBasemapConfig;for(const t of k.value)if(m?.tileSchemaId===t.id){a=t?.hasNorthPole;break}const o=n.$vApp.$el.querySelector(".inner-shell"),c=r.value.querySelector(".northarrow").getBoundingClientRect().width,d=n.$vApp.$el.querySelector(".appbar")?.clientWidth||0,g=e.sr;if(a||typeof a>"u"&&!g.isWebMercator()){const e=new i.bk("pole",{x:-96,y:90}),t=await n.geo.proj.projectGeometry(g,e),a=n.geo.map.mapPointToScreenPoint(t);if(a.screenY<0){p.value=!0;const e={screenX:o.clientWidth/2,screenY:o.clientHeight};l.value=180*Math.atan((a.screenX-e.screenX)/(e.screenY-a.screenY))/Math.PI,h.value=o.clientWidth/2+o.clientHeight*Math.tan(l.value*Math.PI/180)-c/2,h.value=Math.max(d-c/2,Math.min(n.geo.map.getPixelWidth()-c/2,h.value))}else if(p.value=!1,!v.value){let e;v.value=!0,e=s.value?{style:i.kn.ICON,icon:s.value,height:16.5,width:16.5}:f;const a=n.geo.layer.createLayer({id:u,layerType:i.kj.GRAPHIC,url:"",cosmetic:!0});n.geo.map.addLayer(a),a.loadPromise().then((()=>{const n=new i.ko(t,"northpole"),r=new i.kp(e);n.style=r,a.addGraphic(n)}))}}else p.value=!0,l.value=0,h.value=d+(o.clientWidth-d-c)/2};return(e,t)=>((0,i.fQ)(),(0,i.fU)("div",{class:"absolute transition-all duration-300 ease-out",style:(0,i.kq)({"transform-origin":"top center",transform:`rotate(${l.value}deg)`,left:`${h.value}px`,visibility:p.value?"visible":"hidden"}),ref_key:"el",ref:r},[(0,i.fT)("span",{class:"northarrow",innerHTML:d.value},null,8,c)],4))}}),u="RampPoleMarker";class v extends n{async added(){this._parseConfig(this.config);const e=this.$vApp.$watch((()=>this.config),(e=>this._parseConfig(e))),{destroy:t,el:a}=this.mount(d,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(a.childNodes[0]),this.removed=()=>{e(),this.$iApi.geo.layer.getLayer(u)&&this.$iApi.geo.map.removeLayer(u),(0,i.kk)(this.$vApp.$pinia).$reset(),t()}}}}}]);
//# sourceMappingURL=7350.cc7b0b10.js.map