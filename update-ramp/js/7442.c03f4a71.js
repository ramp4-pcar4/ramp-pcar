"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[7442],{67442:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var i=n(44444);class a{id;options;componentId;constructor(e){const t={options:{},...e};({id:this.id,options:this.options,componentId:this.componentId}=t)}}const o=["innerHTML"],l=(0,i.fI)({__name:"default-button",props:{panelId:{type:String,required:!0},minimize:{type:Boolean,default:!1},overflow:{type:Boolean}},setup(e){const{t:t}=(0,i.fJ)(),n=(0,i.f_)("iApi"),a=e,l=(0,i.fM)((()=>n?.panel.get(a.panelId)?.button)),s=()=>{a.minimize?n?.panel.toggleMinimize(a.panelId):n?.panel.toggle(a.panelId)};return(n,a)=>{const r=(0,i.fN)("appbar-button");return l.value?((0,i.fQ)(),(0,i.fR)(r,{key:0,onClickFunction:s,tooltip:(0,i.fY)(t)(l.value.tooltip),id:e.panelId},{default:(0,i.fS)((()=>[(0,i.fT)("div",{class:(0,i.fW)(["default fill-current w-24 h-24 ml-8 sm:ml-20",{"ml-20":e.overflow}]),innerHTML:l.value.icon},null,10,o)])),_:1},8,["tooltip","id"])):(0,i.g7)("",!0)}}}),s={},r={class:"border-b p-0 self-center w-2/3"};function p(e,t){return(0,i.fQ)(),(0,i.fU)("span",r)}const f=(0,i.jO)(s,[["render",p],["__scopeId","data-v-5d32b715"]]);var u={name:"maxSize",enabled:!0,phase:"main",requiresIfExists:["offset","preventOverflow","flip"],fn:function(e){var t=e.state,n=e.name,a=e.options,o=(0,i.pB)(t,a),l=t.modifiersData.preventOverflow||{x:0,y:0},s=l.x,r=l.y,p=t.rects.popper,f=p.width,u=p.height,c=t.placement.split("-"),d=c[0],m="left"===d?"left":"right",v="top"===d?"top":"bottom";t.modifiersData[n]={width:f-o[m]-s,height:u-o[v]-r}}};const c=["content","aria-label"],d=(0,i.fI)({__name:"more-button",props:{position:{type:String,default:"right-end"},popperOptions:{type:Object,default(){return{}}},numItems:{type:Number,default:1},renderWatch:{type:Number,default:0}},emits:["updateParent"],setup(e,{expose:t,emit:n}){const{t:a}=(0,i.fJ)(),o=(0,i.f_)("iApi"),l=e,s=n;function r(){s("updateParent")}const p=(0,i.f$)(!1),f=(0,i.f$)(0),d=(0,i.f$)(),m=(0,i.f$)(),v=(0,i.f$)();function h(){r(),(0,i.pC)((()=>{g(),p.value=!p.value}))}(0,i.g3)((()=>l.renderWatch),(()=>{h()}));const g=()=>{p.value=!p.value;const e=o.$vApp.$el.querySelector(".inner-shell"),t={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:t}){const{width:n}=t.modifiersData.maxSize;t.styles.popper={...t.styles.popper,maxWidth:`${n}px`,maxHeight:e.offsetHeight-45+"px"};const i=Math.min(l.numItems<=0?0:55+44*(l.numItems-1),e.offsetHeight-45);t.styles.popper.height=`${i}px`,v?.value?.offsetHeight&&(v.value.style.height=`${i}px`),t.styles.popper.overflowY="auto",t.styles.popper.overflowX="hidden"}};m.value&&v.value&&(f.value++,(0,i.pD)(m.value,v.value,{placement:l.position||"right-end",modifiers:[{...u,options:{boundary:e}},t,{name:"offset",options:{offset:[0,5]}},{name:"preventOverflow",enabled:!0,options:{boundary:e}}],...l.popperOptions})),1===f.value&&h()};return(0,i.g4)((()=>{window.addEventListener("click",(e=>{e.target instanceof HTMLElement&&!d.value?.contains(e.target)&&(p.value=!1)}),{capture:!0})})),(0,i.g5)((()=>{window.removeEventListener("click",(e=>{e.target instanceof HTMLElement&&!d.value?.contains(e.target)&&(p.value=!1)}),{capture:!0})})),t({rerender:h}),(e,t)=>{const n=(0,i.fO)("focus-item"),o=(0,i.fO)("tippy");return(0,i.fQ)(),(0,i.fU)("div",{class:"appbar-item relative inset-x-0 w-full text-center",ref_key:"el",ref:d},[(0,i.fP)(((0,i.fQ)(),(0,i.fU)("button",{type:"button",class:"text-gray-400 w-full h-48 focus:outline-none hover:text-white",onClick:t[0]||(t[0]=e=>g()),content:(0,i.fY)(a)("appbar.more"),"aria-label":(0,i.fY)(a)("appbar.more"),ref_key:"dropdownTrigger",ref:m},t[1]||(t[1]=[(0,i.fT)("svg",{class:"fill-current w-24 h-24 m-auto",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,i.fT)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,i.fT)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})],-1)]),8,c)),[[n],[o,{placement:"right-end"}]]),(0,i.fP)((0,i.fT)("div",{id:"dropdown",class:"dropdown shadow-md border border-gray:200 absolute w-64 flex flex-col bg-white rounded",ref_key:"dropdown",ref:v},[(0,i.ky)(e.$slots,"default",{},void 0,!0)],512),[[i.jN,p.value]])],512)}}}),m=(0,i.jO)(d,[["__scopeId","data-v-93661050"]]),v={key:0,class:"number absolute top-1 right-2 text-white w-18 rounded-full"},h=(0,i.fI)({__name:"appbar-button",setup(e){const t=(0,i.pE)(),{t:n}=(0,i.fJ)(),a=(0,i.f_)("iApi"),o=(0,i.fM)((()=>t.notificationNumber)),l=()=>{a.panel.toggle("notifications")};return(e,t)=>{const a=(0,i.fN)("appbar-button",!0);return(0,i.fQ)(),(0,i.fR)(a,{onClickFunction:l,tooltip:(0,i.fY)(n)("notifications.title"),class:"notification-button",id:""},{default:(0,i.fS)((()=>[t[0]||(t[0]=(0,i.fT)("svg",{class:"fill-current w-24 h-24 mx-8 sm:mx-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,i.fT)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),o.value&&o.value>0?((0,i.fQ)(),(0,i.fU)("span",v,(0,i.fX)(o.value),1)):(0,i.g7)("",!0)])),_:1},8,["tooltip"])}}}),g=(0,i.jO)(h,[["__scopeId","data-v-787da765"]]),b=["content"],$=(0,i.fI)({__name:"appbar",setup(e){const t=(0,i.fK)(),n=(0,i.hU)(),a=(0,i.f$)(0),o=(0,i.f$)(0),s=(0,i.fM)((()=>n.visible)),r=(0,i.fM)((()=>n.temporary)),{t:p}=(0,i.fJ)(),u=(0,i.f$)(!1),c=(0,i.f$)({}),d=(0,i.f$)(),v=()=>{(0,i.pC)((()=>{(0,i.pG)()?.proxy?.$forceUpdate()}))},h=()=>{d.value._tippy.hide()},$=e=>{"Tab"===e.key&&d.value?.matches(":focus")&&d.value._tippy.show()};return(0,i.g4)((()=>{d.value?.addEventListener("blur",h),d.value?.addEventListener("keyup",$)})),(0,i.g2)((()=>{const e=(0,i.pG)();window.addEventListener("resize",(()=>e?.proxy?.$forceUpdate()))})),(0,i.g5)((()=>{const e=(0,i.pG)();window.removeEventListener("resize",(()=>e?.proxy?.$forceUpdate())),d.value?.removeEventListener("blur",h),d.value?.removeEventListener("keyup",$)})),(0,i.pF)((()=>{(0,i.pC)((()=>{const e=d.value;let n,i=[...e.children],l=i[i.length-2].getBoundingClientRect().top;t.mobileView||(l=e.getBoundingClientRect().bottom-38);let s=e.querySelector("#dropdown");for(let t=i.length-4;t>=0;t--){let e=i[t].getBoundingClientRect().bottom;if(l&&s&&(e>l||u.value&&e+56>l))i[t].classList.forEach((e=>{e.includes("identifier")&&(n=e.slice(11))})),n&&(c.value[n]=!0,n.includes("divider")||a.value++,o.value++),u.value||(u.value=!0);else if(0!==e)break}let r=e.querySelector("#more"),p=r.getBoundingClientRect().bottom;if(n=void 0,u.value&&l&&r&&s&&0!==p&&(p<=l-56||1==s.childElementCount&&p<=l)){let e=s.childElementCount,t=0;for(;p<=l-56||1==e;){let i=s.children[t];if(i&&(i.classList.forEach((e=>{e.includes("identifier")&&(n=e.slice(11))})),n&&(c.value[n]=!1,n.includes("divider")||a.value--),p+=48,e-=1,t+=1),0===e){u.value=!1;break}}}Object.keys(c.value).forEach((t=>{e.querySelector(`.identifier-${t}`)||(delete c.value[t],t.includes("divider")||(a.value=Math.max(0,a.value-1)),o.value++)}))}))})),(e,t)=>{const n=(0,i.fO)("focus-list"),h=(0,i.fO)("tippy");return(0,i.fP)(((0,i.fQ)(),(0,i.fU)("div",{class:"absolute top-0 left-0 bottom-28 flex flex-col w-40 pointer-events-auto appbar z-50 sm:z-20 bg-black-75 sm:w-64 sm:bottom-38",content:(0,i.fY)(p)("panels.controls.items"),ref_key:"el",ref:d},[((0,i.fQ)(!0),(0,i.fU)(i.fZ,null,(0,i.fV)(s.value,((e,t)=>((0,i.fQ)(),(0,i.fU)(i.fZ,null,[((0,i.fQ)(!0),(0,i.fU)(i.fZ,null,(0,i.fV)(e,((e,t)=>((0,i.fQ)(),(0,i.fU)(i.fZ,null,["string"==typeof e&&!0!==c.value[`${e}-${t}`]?((0,i.fQ)(),(0,i.fR)(l,{key:`${e}-${t}-default`,panelId:e,class:(0,i.fW)(["appbar-item h-48",`identifier-${e}-${t}`])},null,8,["panelId","class"])):!0!==c.value[`${e}-${t}`]?((0,i.fQ)(),(0,i.fR)((0,i.mt)(e.componentId),{key:`${e}-${t}-custom`,options:e.options,class:(0,i.fW)(["appbar-item h-48",`identifier-${e}-${t}`]),id:e.id},null,8,["options","id","class"])):(0,i.g7)("",!0)],64)))),256)),!0!==c.value[`divider-${t}`]?((0,i.fQ)(),(0,i.fR)(f,{class:(0,i.fW)(["appbar-item",`identifier-divider-${t}`]),key:`${e}-${t}-default`},null,8,["class"])):(0,i.g7)("",!0)],64)))),256)),((0,i.fQ)(!0),(0,i.fU)(i.fZ,null,(0,i.fV)(r.value?.filter((e=>!0!==c.value[`${e}-temp`])),(e=>((0,i.fQ)(),(0,i.fR)(l,{panelId:e,minimize:!0,key:`${e}-temp`,class:(0,i.fW)([`identifier-${e}-temp`,"appbar-item h-48"])},null,8,["panelId","class"])))),128)),(0,i.fP)((0,i.h4)(m,{id:"more",numItems:a.value,renderWatch:o.value,onUpdateParent:v},{default:(0,i.fS)((()=>[((0,i.fQ)(!0),(0,i.fU)(i.fZ,null,(0,i.fV)(s.value,((e,t)=>((0,i.fQ)(),(0,i.fU)(i.fZ,{key:t},[((0,i.fQ)(!0),(0,i.fU)(i.fZ,null,(0,i.fV)(e,((e,t)=>((0,i.fQ)(),(0,i.fU)(i.fZ,null,["string"==typeof e&&c.value[`${e}-${t}`]?((0,i.fQ)(),(0,i.fR)(l,{key:`${e}-${t}-default`,panelId:e,class:(0,i.fW)(["text-black hover:bg-gray my-4 h-36",`identifier-${e}-${t}`]),overflow:""},null,8,["panelId","class"])):c.value[`${e}-${t}`]?((0,i.fQ)(),(0,i.fR)((0,i.mt)(e.componentId),{key:`${e}-${t}-custom`,options:e.options,id:e.id,class:(0,i.fW)(["appbar-item h-48",`identifier-${e}-${t}`])},null,8,["options","id","class"])):(0,i.g7)("",!0)],64)))),256)),c.value[`divider-${t}`]?((0,i.fQ)(),(0,i.fR)(f,{key:0,class:(0,i.fW)(["border-black my-4",`identifier-divider-${t}`])},null,8,["class"])):(0,i.g7)("",!0)],64)))),128)),((0,i.fQ)(!0),(0,i.fU)(i.fZ,null,(0,i.fV)(r.value?.filter((e=>c.value[`${e}-temp`])),(e=>((0,i.fQ)(),(0,i.fR)(l,{panelId:e,minimize:!0,key:`${e}-temp`,class:(0,i.fW)([`identifier-${e}-temp`,"text-black hover:bg-gray my-4 h-36"]),overflow:""},null,8,["panelId","class"])))),128))])),_:1},8,["numItems","renderWatch"]),[[i.jN,u.value]]),(0,i.h4)(g,{class:"appbar-item bottom-48 h-48 sm:display-none"}),(0,i.h4)(i.pH,{class:"absolute bottom-0 h-40 sm:display-none w-full text-center",position:"right-start"})],8,b)),[[n],[h,{trigger:"manual",touch:!1,placement:"top-end",popperOptions:{placement:"top",modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top"]}}]}}]])}}});class y extends i.F{get config(){return super.config}_parseConfig(e){if(!e)return;const t=(0,i.hU)(this.$vApp.$pinia);let n;n=Array.isArray(e.items[0])?e.items:[e.items];const o=[];n.forEach((e=>{o.push(e.map((e=>"string"==typeof e?e:new a(e))))})),t.items=o.flat().reduce(((e,t)=>(e[t instanceof a?t.id:t]=t,e)),{}),t.order=o.map((e=>e.map((e=>e instanceof a?e.id:e)))),this._validateItems()}_validateItems(){const e=(0,i.hU)(this.$vApp.$pinia);e.order.flat().forEach((t=>{"string"!=typeof e.items[t]&&[t].some((n=>{this.$iApi.fixture.exists(n)&&!e.items[t]&&(e.items[t].componentId=`${n}-appbar-button`)}))}))}}const w={en:{"appbar.navigation":"Navigation","appbar.more":"More","navigation.export":"Export","navigation.map.export":"Export Map"},fr:{"appbar.navigation":"Navigation","appbar.more":"Plus","navigation.export":"Exporter","navigation.map.export":"Exporter la Carte"}};class x extends y{initialized(){}async added(){Object.entries(w).forEach((e=>this.$iApi.$i18n.mergeLocaleMessage(...e)));const{destroy:e,el:t}=this.mount($,{app:this.$element}),n=this.$vApp.$el.getElementsByClassName("inner-shell")[0];n.insertBefore(t.childNodes[0],n.querySelector(".panel-stack")),this._parseConfig(this.config);const a=this.$vApp.$watch((()=>this.config),(e=>this._parseConfig(e))),o=[];o.push(this.$iApi.event.on(i.g9.COMPONENT,(()=>{this._parseConfig(this.config)}))),this.removed=()=>{const t=(0,i.hU)(this.$vApp.$pinia);a(),o.forEach((e=>this.$iApi.event.off(e)));const n={...t.items},l=[...t.temporary];Object.keys(n).forEach((e=>t.removeButton(e))),l.forEach((e=>t.removeButton(e))),e(),t.$reset()}}}}}]);
//# sourceMappingURL=7442.c03f4a71.js.map