{"version":3,"file":"js/5451.74a41f25.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/groupLayerUtils-Da5v5tY3.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/jsonContext-v1mRP0aL.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/multiOriginJSONSupportUtils-DGETddQl.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/originUtils-BLsWtgV9.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/resourceUtils-Djt21JsK.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/resourceUtils-PAYBmvyK.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/utils-2iHN6TbU.js"],"sourcesContent":["import{P as y,$ as p}from\"./utils-2iHN6TbU.js\";import{o as f}from\"./jsonContext-v1mRP0aL.js\";import{w as v,a as d,i as I,f as o}from\"./main-DCIX61zy.js\";import{p as n}from\"./resourceUtils-Djt21JsK.js\";const i=\"Group Layer\",P=\"group-layer-save\",g=\"group-layer-save-as\",s=o.GROUP_LAYER_MAP;function c(e){return{isValid:e.type===\"group\",errorMessage:\"Layer.type should be 'group'\"}}function A(e){return{isValid:v(e,s),errorMessage:`Layer.portalItem.typeKeywords should have '${s}'`}}function u(e,r){return{...f(e,\"web-map\",!0),initiator:r}}function l(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function R(e,r){r.title||=e.title,d(r,o.METADATA),I(r,s)}async function L(e,r){return y({layer:e,itemType:i,validateLayer:c,validateItem:A,createJSONContext:a=>u(a,e),createItemData:l,errorNamePrefix:P,saveResources:async(a,t)=>(e.sourceIsPortalItem||await a.removeAllResources().catch(()=>{}),n(e.resourceReferences,t))},r)}async function N(e,r,a){return p({layer:e,itemType:i,validateLayer:c,createJSONContext:t=>u(t,e),createItemData:l,errorNamePrefix:g,newItem:r,setItemProperties:R,saveResources:(t,m)=>n(e.resourceReferences,m)},a)}export{L as save,N as saveAs};\n","import{I as o,e as s}from\"./main-DCIX61zy.js\";function a(e,r){return{...l(e,r),readResourcePaths:[]}}function i(e,r,n){const t=o(e.itemUrl);return{...l(e,r),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:t?{rootPath:t.path,writtenUrls:[]}:null,resources:n?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function l(e,r){return{origin:r,url:o(e.itemUrl),portal:e.portal||s.getDefault(),portalItem:e}}export{a as e,i as o};\n","function n(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{n as i};\n","import{i as o}from\"./multiOriginJSONSupportUtils-DGETddQl.js\";function n(t){t?.writtenProperties&&t.writtenProperties.forEach(({target:r,propName:e,newOrigin:i})=>{o(r)&&i&&r.originOf(e)!==i&&r.updateOrigin(e,i)})}export{n as i};\n","import{e4 as S,e5 as y,J as v,s as b,e6 as E}from\"./main-DCIX61zy.js\";import{getSiblingOfSameTypeI as R,contentToBlob as f}from\"./resourceUtils-PAYBmvyK.js\";async function F(r,t,o){const s=await d(r,t,o);await I(s,t,o)}async function O(r,t,o,s,a){const c=await d(o,s,a);await r.update({data:t}),await I(c,s,a)}async function d(r,t,o){if(!t?.resources)return;const s=t.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=t.portalItem;const a=new Set(t.resources.toKeep.map(e=>e.resource.path)),c=new Set,m=[];a.forEach(e=>{s.delete(e),r.paths.push(e)});const p=[],h=[],u=[];for(const e of t.resources.toUpdate)if(s.delete(e.resource.path),a.has(e.resource.path)||c.has(e.resource.path)){const{resource:n,content:g,finish:w}=e,i=R(n,S());r.paths.push(i.path),p.push({resource:i,content:await f(g),compress:e.compress}),w&&u.push(()=>w(i))}else{r.paths.push(e.resource.path),h.push({resource:e.resource,content:await f(e.content),compress:e.compress});const n=e.finish;n&&u.push(()=>n(e.resource)),c.add(e.resource.path)}for(const e of t.resources.toAdd)if(r.paths.push(e.resource.path),s.has(e.resource.path))s.delete(e.resource.path);else{p.push({resource:e.resource,content:await f(e.content),compress:e.compress});const n=e.finish;n&&u.push(()=>n(e.resource))}if(p.length||h.length){const{addOrUpdateResources:e}=await import(\"./resourceUtils-PAYBmvyK.js\");await e(t.portalItem,p,\"add\",o),await e(t.portalItem,h,\"update\",o)}if(u.forEach(e=>e()),m.length===0)return s;const l=await y(m);if(v(o),l.length>0)throw new b(\"save:resources\",\"Failed to save one or more resources\",{errors:l});return s}async function I(r,t,o){if(!r||!t.portalItem)return;const s=[];for(const a of r){const c=t.portalItem.resourceFromPath(a);s.push(c.portalItem.removeResource(c,o))}await E(s)}export{O as n,F as p};\n","import{aw as d,s as m,U as b,ax as x}from\"./main-DCIX61zy.js\";async function R(e,t={},s){await e.load(s);const a=d(e.itemUrl,\"resources\"),{start:c=1,num:f=10,sortOrder:l=\"asc\",sortField:u=\"resource\"}=t,i={query:{start:c,num:f,sortOrder:l,sortField:u,token:e.apiKey},signal:s?.signal},o=await e.portal.request(a,i);return{total:o.total,nextStart:o.nextStart,resources:o.resources.map(({created:n,size:p,resource:r})=>({created:new Date(n),size:p,resource:e.resourceFromPath(r)}))}}async function q(e,t,s,a){const c=new Map;for(const{resource:l,content:u,compress:i,access:o}of t){if(!l.hasPath())throw new m(`portal-item-resource-${s}:invalid-path`,\"Resource does not have a valid path\");const[n,p]=h(l.path),r=`${n}/${i??\"\"}/${o??\"\"}`;c.has(r)||c.set(r,{prefix:n,compress:i,access:o,files:[]}),c.get(r).files.push({fileName:p,content:u})}await e.load(a);const f=d(e.userItemUrl,s===\"add\"?\"addResources\":\"updateResources\");for(const{prefix:l,compress:u,access:i,files:o}of c.values())for(let n=0;n<o.length;n+=25){const p=o.slice(n,n+25),r=new FormData;l&&l!==\".\"&&r.append(\"resourcesPrefix\",l),u&&r.append(\"compress\",\"true\"),i&&r.append(\"access\",i);let g=0;for(const{fileName:y,content:v}of p)r.append(\"file\"+ ++g,v,y);r.append(\"f\",\"json\"),await e.portal.request(f,{method:\"post\",body:r,signal:a?.signal})}}async function P(e,t,s){if(!t.hasPath())throw new m(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(s);const a=d(e.userItemUrl,\"removeResources\");await e.portal.request(a,{method:\"post\",query:{resource:t.path},signal:s?.signal}),t.portalItem=null}async function F(e,t){await e.load(t);const s=d(e.userItemUrl,\"removeResources\");return e.portal.request(s,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function h(e){const t=e.lastIndexOf(\"/\");return t===-1?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function w(e){const[t,s]=I(e),[a,c]=h(t);return[a,c,s]}function I(e){const t=x(e);return t==null?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function U(e){return e.type===\"blob\"?e.blob:e.type===\"json\"?new Blob([e.jsonString],{type:\"application/json\"}):(await b(e.url,{responseType:\"blob\"})).data}function O(e,t){if(!e.hasPath())return null;const[s,,a]=w(e.path);return e.portalItem.resourceFromPath(d(s,t+a))}export{q as addOrUpdateResources,U as contentToBlob,R as fetchResources,O as getSiblingOfSameTypeI,F as removeAllResources,P as removeResource,w as splitPrefixFileNameAndExtension};\n","import{s as c,S as P,e as h,i as x,f as N}from\"./main-DCIX61zy.js\";import{i as u}from\"./originUtils-BLsWtgV9.js\";import{o as S}from\"./jsonContext-v1mRP0aL.js\";import{t as b}from\"./saveUtils-BQy3eBhU.js\";function g(t,a,r){const e=r(t);if(!e.isValid)throw new c(`${a}:invalid-parameters`,e.errorMessage,{layer:t})}async function d(t){const{layer:a,errorNamePrefix:r,validateLayer:e}=t;await a.load(),g(a,r,e)}function y(t,a){return`Layer (title: ${t.title}, id: ${t.id}) of type '${t.declaredClass}' ${a}`}function w(t){const{item:a,errorNamePrefix:r,layer:e,validateItem:i}=t;if(O(t),i){const n=i(a);if(!n.isValid)throw new c(`${r}:invalid-parameters`,n.errorMessage,{layer:e})}}function O(t){const{item:a,itemType:r,additionalItemType:e,errorNamePrefix:i,layer:n}=t,s=[r];if(e&&s.push(e),!s.includes(a.type)){const p=s.map(o=>`'${o}'`).join(\", \");throw new c(`${i}:portal-item-wrong-type`,`Portal item type should be one of: \"${p}\"`,{item:a,layer:n})}}function J(t){const{layer:a,errorNamePrefix:r}=t,{portalItem:e}=a;if(!e)throw new c(`${r}:portal-item-not-set`,y(a,\"requires the portalItem property to be set\"));if(!e.loaded)throw new c(`${r}:portal-item-not-loaded`,y(a,\"cannot be saved to a portal item that does not exist or is inaccessible\"));w({...t,item:e})}function E(t){const{newItem:a,itemType:r}=t;let e=P.from(a);return e.id&&(e=e.clone(),e.id=null),e.type??=r,e.portal??=h.getDefault(),w({...t,item:e}),e}function I(t){return S(t,\"portal-item\")}async function $(t,a,r){\"beforeSave\"in t&&typeof t.beforeSave==\"function\"&&await t.beforeSave();const e=t.write({},a);return await Promise.all(a.resources?.pendingOperations??[]),b(a,{errorName:\"layer-write:unsupported\"},r),e}function v(t){x(t,N.JSAPI),t.typeKeywords&&(t.typeKeywords=t.typeKeywords.filter((a,r,e)=>e.indexOf(a)===r))}async function U(t,a,r){const e=t.portal;await e.signIn(),await e.user.addItem({item:t,data:a,folder:r?.folder})}async function C(t,a){const{layer:r,createItemData:e,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=t;await d(t),J(t);const o=r.portalItem,l=i?i(o):I(o),f=await $(r,l,{...a,supplementalUnsupportedErrors:p}),m=await e({layer:r,layerJSON:f},o);return await n?.(r,o,m),v(o),await o.update({data:m}),u(l),await s?.(o,l),o}async function D(t,a){const{layer:r,createItemData:e,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=t;await d(t);const o=E(t),l=i?i(o):I(o),f=await $(r,l,{...a,supplementalUnsupportedErrors:p}),m=await e({layer:r,layerJSON:f},o);return await n(r,o,m),v(o),await U(o,m,a),r.portalItem=o,u(l),await s?.(o,l),o}export{D as $,C as P};\n"],"names":["i","P","g","s","GROUP_LAYER_MAP","c","e","isValid","type","errorMessage","A","u","r","initiator","l","layerJSON","Promise","resolve","Object","keys","length","async","R","title","METADATA","L","layer","itemType","validateLayer","validateItem","createJSONContext","a","createItemData","errorNamePrefix","saveResources","t","sourceIsPortalItem","removeAllResources","catch","resourceReferences","N","newItem","setItemProperties","m","readResourcePaths","n","itemUrl","messages","writtenProperties","blockedRelativeUrls","verifyItemRelativeUrls","rootPath","path","writtenUrls","resources","toAdd","toUpdate","toKeep","pendingOperations","origin","url","portal","getDefault","portalItem","forEach","target","propName","newOrigin","originOf","updateOrigin","F","o","d","I","O","update","data","Set","paths","map","resource","delete","push","p","h","has","content","finish","w","compress","add","addOrUpdateResources","errors","resourceFromPath","removeResource","load","start","num","f","sortOrder","sortField","query","token","apiKey","signal","request","total","nextStart","created","size","Date","q","Map","access","hasPath","set","prefix","files","get","fileName","userItemUrl","values","slice","FormData","append","y","v","method","body","deleteAll","lastIndexOf","U","blob","Blob","jsonString","responseType","id","declaredClass","item","additionalItemType","includes","join","J","loaded","E","from","clone","$","beforeSave","write","all","errorName","JSAPI","typeKeywords","filter","indexOf","signIn","user","addItem","folder","C","supplementalUnsupportedErrors","D"],"sourceRoot":""}