{"version":3,"file":"js/9888.2597cc30.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/BitmapContainer-Cpw_vXaU.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/ExportStrategy-BZfM4Ojc.js","webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/ImageryLayerView2D-BZ8xlRHu.js"],"sourcesContent":["import{n as r,t as a}from\"./WGLContainer-whJgsi2t.js\";import{aK as t}from\"./main-DCIX61zy.js\";class d extends r{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"bitmap\",brushes:[a.bitmap],target:()=>this.children,drawPhase:t.MAP});return[...super.prepareRenderPasses(e),s]}_manageFade(){this.children.reduce((e,s)=>e+(s.inFadeTransition?1:0),0)>=2?(this.children.forEach(e=>e.blendFunction=\"additive\"),this._hasCrossfade=!0):(this.children.forEach(e=>e.blendFunction=\"standard\"),this._hasCrossfade=!1)}}export{d as a};\n","import{b2 as E,c8 as N,bt as d,bu as l,bv as H,e9 as T,f8 as P,J as v,b3 as q,B,e6 as U,eU as b,gJ as C,c3 as I}from\"./main-DCIX61zy.js\";import{S as J}from\"./Bitmap-DixeSrEO.js\";const A=Math.PI/180;function O(e){return e*A}function k(e,i){const s=O(i.rotation),t=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),[o,n]=i.size;return e[0]=Math.round(n*r+o*t),e[1]=Math.round(n*t+o*r),e}function D(e,i,s,t){const[r,o]=i,[n,a]=t,c=.5*s;return e[0]=r-c*n,e[1]=o-c*a,e[2]=r+c*n,e[3]=o+c*a,e}const u=E(),m=[0,0],_=new N(0,0,0,0),y={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let h=class extends T{constructor(e){super(e),this._imagePromise=null,this.bitmaps=[],this.hidpi=y.hidpi,this.imageMaxWidth=y.imageMaxWidth,this.imageMaxHeight=y.imageMaxHeight,this.imageRotationSupported=y.imageRotationSupported,this.imageNormalizationSupported=y.imageNormalizationSupported,this.update=P(async(i,s)=>{if(v(s),!i.stationary||this.destroyed)return;const t=i.state,r=q(t.spatialReference),o=this.hidpi?i.pixelRatio:1,n=t.worldScreenWidth>0,a=n&&this.imageNormalizationSupported&&t.worldScreenWidth<t.size[0],c=Math.round((this.imageMaxWidth??0)/o),x=Math.round((this.imageMaxHeight??0)/o);a?(m[0]=t.worldScreenWidth,m[1]=t.size[1]):this.imageRotationSupported?(m[0]=t.size[0],m[1]=t.size[1]):k(m,t);const M=Math.floor(m[0])>c||Math.floor(m[1])>x,S=r&&(t.extent.xmin<r.valid[0]||t.extent.xmax>r.valid[1]),w=!this.imageNormalizationSupported&&S,f=!M&&!w,z=this.imageRotationSupported?t.rotation:0,W=this.container.children.slice();if(f){const p=a?t.paddedViewState.center:t.center;this._imagePromise=this._singleExport(t,m,p,t.resolution,z,o,s)}else{let p=Math.min(c,x);n&&(p=Math.min(t.worldScreenWidth,p),p=Math.round(t.worldScreenWidth/Math.ceil(t.worldScreenWidth/p))),this._imagePromise=this._tiledExport(t,p,o,s)}try{const p=await this._imagePromise??[];v(s);const R=[];if(this._imagePromise=null,this.destroyed)return;this.bitmaps=p;for(const g of W)p.includes(g)||R.push(g.fadeOut().then(()=>{g.remove(),g.destroy()}));for(const g of p)R.push(g.fadeIn());await Promise.all(R)}catch(p){this._imagePromise=null,B(p)}},5e3),this.updateExports=P(async i=>{const s=[];for(const t of this.container.children){if(!t.visible||!t.stage)return;s.push(i(t).then(()=>{t.invalidateTexture(),t.requestRender()}))}this._imagePromise=U(s).then(()=>this._imagePromise=null),await this._imagePromise})}destroy(){this.bitmaps.forEach(e=>e.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&this._imagePromise!==null}async _export(e,i,s,t,r,o){const n=await this.fetchSource(e,Math.floor(i*r),Math.floor(s*r),{rotation:t,pixelRatio:r,signal:o});v(o);const a=new J(null,!0);return a.x=e.xmin,a.y=e.ymax,a.resolution=e.width/i,a.rotation=t,a.pixelRatio=r,a.opacity=0,this.container.addChild(a),await a.setSourceAsync(n,o),v(o),a}async _singleExport(e,i,s,t,r,o,n){D(u,s,t,i);const a=b(u,e.spatialReference);return[await this._export(a,i[0],i[1],r,o,n)]}_tiledExport(e,i,s,t){const r=C.create({size:i,spatialReference:e.spatialReference,scales:[e.scale]}),o=new I(r),n=o.getTileCoverage(e);if(!n)return null;const a=[];return n.forEach((c,x,M,S)=>{_.set(c,x,M,0),o.getTileBounds(u,_);const w=b(u,e.spatialReference);a.push(this._export(w,i,i,0,s,t).then(f=>(S!==0&&(_.set(c,x,M,S),o.getTileBounds(u,_),f.x=u[0],f.y=u[3]),f)))}),Promise.all(a)}};d([l()],h.prototype,\"_imagePromise\",void 0),d([l()],h.prototype,\"bitmaps\",void 0),d([l()],h.prototype,\"container\",void 0),d([l()],h.prototype,\"fetchSource\",void 0),d([l()],h.prototype,\"hidpi\",void 0),d([l()],h.prototype,\"imageMaxWidth\",void 0),d([l()],h.prototype,\"imageMaxHeight\",void 0),d([l()],h.prototype,\"imageRotationSupported\",void 0),d([l()],h.prototype,\"imageNormalizationSupported\",void 0),d([l()],h.prototype,\"requestUpdate\",void 0),d([l()],h.prototype,\"updating\",null),h=d([H(\"esri.views.2d.layers.support.ExportStrategy\")],h);const V=h;export{V as _};\n","import{bt as a,bu as n,bv as x,e9 as R,c7 as f,G as b,a1 as _,l$ as I,aK as V,f8 as z,bn as E,m0 as A,iI as U,cc as P,hG as C,U as $,bT as L,s as O,J as M,fv as j,D as S,c2 as G,eL as D,a8 as q,bh as B,Q as H}from\"./main-DCIX61zy.js\";import{d as N,f as J,a as W}from\"./RasterVFDisplayObject-DH4gEjoh.js\";import{j as K,y as Q}from\"./LayerView-DONYuvqR.js\";import{F as X}from\"./GraphicsView2D-DGP_h330.js\";import{h as Y}from\"./HighlightGraphicContainer-cUb9kmn3.js\";import{a as Z}from\"./BitmapContainer-Cpw_vXaU.js\";import{n as ee}from\"./Container-C-rqKhNk.js\";import{l as te}from\"./Bitmap-DixeSrEO.js\";import{_ as ie}from\"./ExportStrategy-BZfM4Ojc.js\";import{K as se}from\"./rasterProjectionHelper-CgVEist9.js\";import{n as ae}from\"./WGLContainer-whJgsi2t.js\";import{i as re}from\"./timeSupport-m80hv0JM.js\";import{p as ne}from\"./popupUtils-CGEHI2En.js\";import{i as oe}from\"./RefreshableLayerView-D30wcOhz.js\";let h=class extends R{constructor(){super(...arguments),this.attached=!1,this.container=new ee,this.updateRequested=!1,this.type=\"imagery\",this._bitmapView=new Z}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this.strategy.update(e).catch(t=>{f(t)||b.getLogger(this).error(t)})}hitTest(e){return new _({attributes:{},geometry:e.clone(),layer:this.layer})}attach(){this.container.addChild(this._bitmapView);const e=this.layer.version>=10,t=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this.strategy=new ie({container:this._bitmapView,imageNormalizationSupported:e,imageMaxHeight:t,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()})}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren(),this.updateRequested=!1}redraw(){this.strategy.updateExports(async e=>{const{source:t}=e;if(!t||t instanceof ImageBitmap)return;const i=await this.layer.applyRenderer({extent:t.extent,pixelBlock:t.originalPixelBlock??t.pixelBlock});t.filter=s=>this.layer.pixelFilter?this.layer.applyFilter(s):{...i,extent:t.extent}}).catch(e=>{f(e)||b.getLogger(this).error(e)})}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const e=this.strategy.bitmaps;if(e.length===1&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){const t=this.view.extent,i=e.map(r=>r.source).filter(r=>r.extent&&r.extent.intersects(t)).map(r=>({extent:r.extent,pixelBlock:r.originalPixelBlock})),s=I(i,t);return s!=null?{extent:s.extent,pixelBlock:s.pixelBlock}:null}return null}async _fetchImage(e,t,i,s){(s=s||{}).timeExtent=this.timeExtent,s.requestAsImageElement=!0,s.returnImageBitmap=!0;const r=await this.layer.fetchImage(e,t,i,s);if(r.imageBitmap)return r.imageBitmap;const o=await this.layer.applyRenderer(r.pixelData,{signal:s.signal}),l=new te(o.pixelBlock,o.extent?.clone(),r.pixelData.pixelBlock);return l.filter=y=>this.layer.applyFilter(y),l}};a([n()],h.prototype,\"attached\",void 0),a([n()],h.prototype,\"container\",void 0),a([n()],h.prototype,\"layer\",void 0),a([n()],h.prototype,\"strategy\",void 0),a([n()],h.prototype,\"timeExtent\",void 0),a([n()],h.prototype,\"view\",void 0),a([n()],h.prototype,\"updateRequested\",void 0),a([n()],h.prototype,\"updating\",null),a([n()],h.prototype,\"type\",void 0),h=a([x(\"esri.views.2d.layers.imagery.ImageryView2D\")],h);const le=h;class he extends ae{constructor(){super(...arguments),this.symbolTypes=[\"triangle\"]}prepareRenderPasses(t){const i=t.registerRenderPass({name:\"imagery (vf)\",brushes:[N],target:()=>this.children,drawPhase:V.MAP});return[...super.prepareRenderPasses(t),i]}doRender(t){this.visible&&t.drawPhase===V.MAP&&this.symbolTypes.forEach(i=>{t.renderPass=i,super.doRender(t)})}}let m=class extends R{constructor(e){super(e),this._loading=null,this.update=z((t,i)=>this._update(t,i).catch(s=>{f(s)||b.getLogger(this).error(s)}))}get updating(){return!!this._loading}redraw(e){if(!this.container.children.length)return;const t=this.container.children[0];t.symbolizerParameters=e,t.invalidateVAO(),this.container.symbolTypes=e.style===\"wind_speed\"?[\"scalar\",\"triangle\"]:e.style===\"simple_scalar\"?[\"scalar\"]:[\"triangle\"],this.container.requestRender()}async _update(e,t,i){if(!e.stationary)return;const{extent:s,spatialReference:r}=e.state,o=new E({xmin:s.xmin,ymin:s.ymin,xmax:s.xmax,ymax:s.ymax,spatialReference:r}),[l,y]=e.state.size;this._loading=this.fetchPixels(o,l,y,i);const d=await this._loading;this._addToDisplay(d,t,e.state),this._loading=null}_addToDisplay(e,t,i){if(e.pixelBlock==null)return this.container.children.forEach(l=>l.destroy()),void this.container.removeAllChildren();const{extent:s,pixelBlock:r}=e,o=new J(r);o.offset=[0,0],o.symbolizerParameters=t,o.rawPixelData=e,o.invalidateVAO(),o.x=s.xmin,o.y=s.ymax,o.pixelRatio=i.pixelRatio,o.rotation=i.rotation,o.resolution=i.resolution,o.width=r.width*t.symbolTileSize,o.height=r.height*t.symbolTileSize,this.container.children.forEach(l=>l.destroy()),this.container.removeAllChildren(),this.container.symbolTypes=t.style===\"wind_speed\"?[\"scalar\",\"triangle\"]:t.style===\"simple_scalar\"?[\"scalar\"]:[\"triangle\"],this.container.addChild(o)}};a([n()],m.prototype,\"fetchPixels\",void 0),a([n()],m.prototype,\"container\",void 0),a([n()],m.prototype,\"_loading\",void 0),a([n()],m.prototype,\"updating\",null),m=a([x(\"esri.views.2d.layers.imagery.ImageryVFStrategy\")],m);const ce=m;let c=class extends R{constructor(){super(...arguments),this.attached=!1,this.container=new he,this.type=\"imageryVF\",this._dataParameters={exportParametersVersion:0,bbox:\"\",symbolTileSize:0,time:\"\"},this._fetchpixels=async(e,t,i,s)=>{const r=await this._projectFullExtentPromise,{symbolTileSize:o}=this.layer.renderer,{extent:l,width:y,height:d}=A(e,t,i,o,r);if(r!=null&&!r.intersects(e))return{extent:l,pixelBlock:null};const p={bbox:`${l.xmin}, ${l.ymin}, ${l.xmax}, ${l.ymax}`,exportParametersVersion:this.layer.exportImageServiceParameters.version,symbolTileSize:o,time:JSON.stringify(this.timeExtent||\"\")};if(this._canReuseVectorFieldData(p)){const u=this.getPixelData();if(u!=null&&`${u.extent.xmin}, ${u.extent.ymin}, ${u.extent.xmax}, ${u.extent.ymax}`===p.bbox)return u}const{pixelData:v}=await this.layer.fetchImage(l,y,d,{timeExtent:this.timeExtent,requestAsImageElement:!1,signal:s});this._dataParameters=p;const g=v?.pixelBlock;return g==null?{extent:l,pixelBlock:null}:{extent:l,pixelBlock:this.layer.rasterInfo.dataType===\"vector-uv\"?U(g,\"vector-uv\"):g}}}get updating(){return!this.attached||this._strategy.updating}attach(){this._projectFullExtentPromise=this._getProjectedFullExtent(this.view.spatialReference),this._strategy=new ce({container:this.container,fetchPixels:this._fetchpixels}),this.addHandles(P(()=>this.layer.renderer,e=>this._updateSymbolizerParams(e),C),\"attach\")}detach(){this._strategy.destroy(),this.container.children.forEach(e=>e.destroy()),this.container.removeAllChildren(),this.removeHandles(\"attach\"),this._strategy=this.container=this._projectFullExtentPromise=null}getPixelData(){const e=this.container.children[0]?.rawPixelData;if(this.updating||!e)return null;const{extent:t,pixelBlock:i}=e;return{extent:t,pixelBlock:i}}hitTest(e){return new _({attributes:{},geometry:e.clone(),layer:this.layer})}update(e){this._strategy.update(e,this._symbolizerParams).catch(t=>{f(t)||b.getLogger(this).error(t)})}redraw(){const{renderer:e}=this.layer;e&&(this._updateSymbolizerParams(e),this._strategy.redraw(this._symbolizerParams))}_canReuseVectorFieldData(e){const t=this._dataParameters.exportParametersVersion===e.exportParametersVersion,i=this._dataParameters.time===e.time,s=this._dataParameters.symbolTileSize===e.symbolTileSize,r=this._dataParameters.bbox===e.bbox;return t&&i&&s&&r}async _getProjectedFullExtent(e){try{return se(this.layer.fullExtent,e)}catch{try{const t=(await $(this.layer.url,{query:{option:\"footprints\",outSR:L(e),f:\"json\"}})).data.featureCollection.layers[0].layerDefinition.extent;return t?E.fromJSON(t):null}catch{return null}}}_updateSymbolizerParams(e){e.type===\"vector-field\"&&(this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null}))}};a([n()],c.prototype,\"attached\",void 0),a([n()],c.prototype,\"container\",void 0),a([n()],c.prototype,\"layer\",void 0),a([n()],c.prototype,\"timeExtent\",void 0),a([n()],c.prototype,\"type\",void 0),a([n()],c.prototype,\"view\",void 0),a([n()],c.prototype,\"updating\",null),c=a([x(\"esri.views.2d.layers.imagery.VectorFieldView2D\")],c);const de=c,pe=e=>{let t=class extends e{constructor(){super(...arguments),this.view=null}get timeExtent(){return re(this.layer,this.view?.timeExtent,this._get(\"timeExtent\"))}async fetchPopupFeaturesAtLocation(i,s){const{layer:r}=this;if(!i)throw new O(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:r});const{popupEnabled:o}=r,l=ne(r,s);if(!o||l==null)return[];const y=await l.getRequiredFields();M(s);const d=new j;d.timeExtent=this.timeExtent,d.geometry=i,d.outFields=y,d.outSpatialReference=i.spatialReference;const{resolution:p,spatialReference:v}=this.view,g=this.view.type===\"2d\"?new S(p,p,v):new S(.5*p,.5*p,v),{returnTopmostRaster:u,showNoDataRecords:k}=l.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},T={returnDomainValues:!0,returnTopmostRaster:u,pixelSize:g,showNoDataRecords:k,signal:s?.signal};return r.queryVisibleRasters(d,T).then(F=>F)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return a([n()],t.prototype,\"layer\",void 0),a([n()],t.prototype,\"suspended\",void 0),a([n({readOnly:!0})],t.prototype,\"timeExtent\",null),a([n()],t.prototype,\"view\",void 0),t=a([x(\"esri.views.layers.ImageryLayerView\")],t),t};let w=class extends pe(oe(K(Q))){constructor(){super(...arguments),this._exportImageVersion=-1,this._highlightGraphics=new G,this._highlightView=void 0,this.layer=null,this.subview=null}get pixelData(){const{subview:e}=this;return this.updating||!e?null:\"getPixelData\"in e?e.getPixelData():null}update(e){this.subview?.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.view&&(this._highlightView=new X({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Y(this.view.featuresTilingScheme)}),this.container.addChild(this._highlightView.container)),this.addAttachHandles([P(()=>this.layer.exportImageServiceParameters.version,e=>{e&&this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())},D),P(()=>this.timeExtent,e=>{const{subview:t}=this;t&&(t.timeExtent=e,\"redraw\"in t?this.requestUpdate():t.redrawOrRefetch())},D),this.layer.on(\"redraw\",()=>{const{subview:e}=this;e&&(\"redraw\"in e?e.redraw():e.redrawOrRefetch())}),P(()=>this.layer.renderer,()=>this._setSubView())])}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.container.removeAllChildren(),this._detachSubview(this.subview),this.subview?.destroy(),this.subview=null,this._highlightView?.destroy(),this._exportImageVersion=-1}viewChange(){}moveEnd(){this.requestUpdate()}highlight(e,t){if(!((Array.isArray(e)?e[0]:q.isCollection(e)?e.at(0):e)instanceof _))return B();let i=[];return Array.isArray(e)||q.isCollection(e)?i=e.map(s=>s.clone()):e instanceof _&&(i=[e.clone()]),this._highlightGraphics.addMany(i),B(()=>this._highlightGraphics.removeMany(i))}async doRefresh(){this.requestUpdate()}isUpdating(){const e=!this.subview||this.subview.updating||!!this._highlightView?.updating;return H(\"esri-2d-log-updating\")&&console.log(`Updating ImageryLayerView2D (${this.layer.id}): ${e}\n-> subview ${!this.subview||this.subview.updating}\n-> higlightView ${this._highlightView?.updating}\n`),e}_setSubView(){if(!this.view)return;const e=this.layer.renderer?.type;let t=\"imagery\";if(e===\"vector-field\"?t=\"imageryVF\":e===\"flow\"&&(t=\"flow\"),this.subview){const{type:i}=this.subview;if(i===t)return this._attachSubview(this.subview),void(i===\"flow\"?this.subview.redrawOrRefetch():i===\"imagery\"&&this.layer.format===\"lerc\"?this.subview.redraw():this.requestUpdate());this._detachSubview(this.subview),this.subview?.destroy()}this.subview=t===\"imagery\"?new le({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):t===\"imageryVF\"?new de({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new W({layer:this.layer,layerView:this}),this._attachSubview(this.subview),this.requestUpdate()}_attachSubview(e){e&&!e.attached&&(e.attach(),e.attached=!0,this.container.addChildAt(e.container,0))}_detachSubview(e){e?.attached&&(this.container.removeChild(e.container),e.detach(),e.attached=!1)}};a([n()],w.prototype,\"pixelData\",null),a([n()],w.prototype,\"subview\",void 0),w=a([x(\"esri.views.2d.layers.ImageryLayerView2D\")],w);const ue=w;export{ue as default};\n"],"names":["d","constructor","super","arguments","this","_hasCrossfade","requiresDedicatedFBO","beforeRender","e","_manageFade","prepareRenderPasses","s","registerRenderPass","name","brushes","bitmap","target","children","drawPhase","MAP","reduce","inFadeTransition","forEach","blendFunction","A","Math","PI","O","k","i","rotation","t","abs","cos","r","sin","o","n","size","round","D","a","c","u","m","_","y","container","fetchSource","requestUpdate","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","hidpi","h","_imagePromise","bitmaps","update","async","stationary","destroyed","state","spatialReference","pixelRatio","worldScreenWidth","x","M","floor","S","extent","xmin","valid","xmax","w","f","z","W","slice","p","paddedViewState","center","_singleExport","resolution","min","ceil","_tiledExport","R","g","includes","push","fadeOut","then","remove","destroy","fadeIn","Promise","all","B","updateExports","visible","stage","invalidateTexture","requestRender","updating","_export","signal","ymax","width","opacity","addChild","setSourceAsync","create","scales","scale","getTileCoverage","set","getTileBounds","prototype","V","attached","updateRequested","type","_bitmapView","detach","isUpdating","strategy","catch","getLogger","error","hitTest","attributes","geometry","clone","layer","attach","version","_fetchImage","bind","removeAllChildren","redraw","source","ImageBitmap","applyRenderer","pixelBlock","originalPixelBlock","filter","pixelFilter","applyFilter","view","getPixelData","length","map","intersects","timeExtent","requestAsImageElement","returnImageBitmap","fetchImage","imageBitmap","pixelData","l","le","he","symbolTypes","doRender","renderPass","_loading","_update","symbolizerParameters","invalidateVAO","style","ymin","fetchPixels","_addToDisplay","offset","rawPixelData","symbolTileSize","height","ce","_dataParameters","exportParametersVersion","bbox","time","_fetchpixels","_projectFullExtentPromise","renderer","exportImageServiceParameters","JSON","stringify","_canReuseVectorFieldData","v","rasterInfo","dataType","_strategy","_getProjectedFullExtent","addHandles","_updateSymbolizerParams","removeHandles","_symbolizerParams","fullExtent","url","query","option","outSR","data","featureCollection","layers","layerDefinition","fromJSON","symbolizer","generateWebGLParameters","de","pe","_get","fetchPopupFeaturesAtLocation","popupEnabled","getRequiredFields","outFields","outSpatialReference","returnTopmostRaster","showNoDataRecords","layerOptions","T","returnDomainValues","pixelSize","queryVisibleRasters","F","canResume","isEmpty","readOnly","_exportImageVersion","_highlightGraphics","_highlightView","subview","increaseRasterJobHandlerUsage","_setSubView","graphics","requestUpdateCallback","featuresTilingScheme","addAttachHandles","redrawOrRefetch","on","decreaseRasterJobHandlerUsage","_detachSubview","viewChange","moveEnd","highlight","Array","isArray","isCollection","at","addMany","removeMany","doRefresh","console","log","id","_attachSubview","format","layerView","addChildAt","removeChild","ue"],"sourceRoot":""}